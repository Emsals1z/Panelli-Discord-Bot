const fs=require('fs');
const Discord=require("discord.js");
const client = new Discord.Client({
  fetchAllMembers: true,
  partials: ["MESSAGE", "USER", "REACTION"]
});
const db = require('quick.db')
const chalk = require("chalk");
const moment = require("moment");
const ayarlar=require("./ayarlar.json");
const express = require('express');
require('./util/eventloader')(client)
require('discord-buttons')(client)
const disbut = require('discord-buttons');
const Topgg = require('@top-gg/sdk')
const newUsers = [];

const api = new Topgg.Api(ayarlar.topgg);


const { GiveawaysManager } = require('discord-giveaways');
const ms = require("parse-ms");
const queue = new Map();
const canvacord = require("canvacord");
const Canvas = require("canvas");
const fetch = require('node-fetch')
/////


/////


//////////////////
client.on("message",async  message => {
  if (message.channel.type === "dm")
     { let prefix = ayarlar.prefix
  let client = message.client;
  if (message.author.bot) return;
  if (!message.content.startsWith(prefix)) return;
  let command = message.content.split(' ')[0].slice(ayarlar.prefix.length)
  let params = message.content.split(' ').slice(1);
  let perms = client.yetkiler(message);
  let cmd;
   
  if (!client.commands.has(command)) {
    if (client.aliases.has(command)) {
    
    } else {
        
           let Crewembed = new Discord.MessageEmbed()
                .setDescription(`Komutlarƒ±mda **${command}** adƒ±nda bir komut bulamadƒ±m! Komut listesine bakmak i√ßin:          
   **${prefix}yardƒ±m**`)
    message.channel.send(Crewembed).then(msg => {
    msg.delete({ timeout: 5000 })
  })
    }
  }
  
  
if (client.commands.has(command)) {
    cmd = client.commands.get(command);
  } else if (client.aliases.has(command)) {
           
    cmd = client.commands.get(client.aliases.get(command));
  }
     

  if (cmd) {
    if (perms < cmd.conf.permLevel) return;
     cmd.run(client, message, params, perms,);
  
  }}
  else{   let prefix = await db.fetch(`prefix_${message.guild.id}`) || ayarlar.prefix
  let client = message.client;
  if (message.author.bot) return;
  if (!message.content.startsWith(prefix)) return;
  let command = message.content.split(' ')[0].slice(ayarlar.prefix.length)
  let params = message.content.split(' ').slice(1);
  let perms = client.yetkiler(message);
  let cmd;
   
  if (!client.commands.has(command)) {
    if (client.aliases.has(command)) {
    
    } 
      else {
         if(db.has(`yasakK_${message.guild.id}`) === true) {
  if(db.fetch(`yasakK_${message.guild.id}`).includes(command)) return message.channel.send('Bu komut bu sunucuda **yasaklanmƒ±≈ütƒ±r!**')}
            if(db.has(`komuti_${message.guild.id}`) === false) return;
          let Crewembed = new Discord.MessageEmbed()
                .setDescription(`Komutlarƒ±mda **${command}** adƒ±nda bir komut bulamadƒ±m! Komut listesine bakmak i√ßin:          
   **${prefix}yardƒ±m**`)
    message.channel.send(Crewembed).then(msg => {
    msg.delete({ timeout: 5000 })
  })
    }
      
  }
  
  
  if (client.commands.has(command)) {
    cmd = client.commands.get(command);
  } else if (client.aliases.has(command)) {
           
    cmd = client.commands.get(client.aliases.get(command));
  }
      

  if (cmd) {
    if (perms < cmd.conf.permLevel) return;
     cmd.run(client, message, params, perms,);
  }
       }
})


client.on("ready", () => {
  client.user.setPresence({
    status: "idle",
    activity: {
        name: `F‚ÅâÔ∏è |!yardƒ±m |f-bot.cf`,
        type: "WATCHING"
    }
}); //PLAYING: WATCHING: LISTENING: STREAMING:// Can be 'available', 'idle', 'dnd', or 'invisible'
  console.log(`B√ºt√ºn komutlar ba≈üarƒ±yla y√ºklendi Developt by Emsalsiz!`);
 console.log(`${client.user.username} Aktif!`);
   console.log(`${client.user.username} ≈üu an ${client.guilds.cache.size} adet servere ve  ${client.users.cache.size} adet kullanƒ±cƒ±ya hizmet vermekte.`);
/*setInterval(() => {
          api.postStats({
            serverCount: client.guilds.cache.size
            })  
            
            }, 2400000)*/ //Bu KISIM TOP.GG YE SUNUCUNUN KA√á SERVERDA OLDUƒûUNU G√ñNDERMEK ƒ∞√áƒ∞N
    


});






const log = message => {
  console.log(`[${moment().format("YYYY-MM-DD HH:mm:ss")}] ${message}`);
};


client.commands = new Discord.Collection();
client.aliases = new Discord.Collection();
fs.readdir('./komutlar/', (err, files) => {
  if (err) console.error(err);
  log(`${files.length} adet komut y√ºklemeye hazƒ±rlanƒ±lƒ±yor.`);
  files.forEach(f => {
    let props = require(`./komutlar/${f}`);
    log(`Y√ºklenen komut ismi: ${props.help.name.toUpperCase()}.`);
    client.commands.set(props.help.name, props);
    props.conf.aliases.forEach(alias => {
      client.aliases.set(alias, props.help.name);
    });
  });
});
fs.readdir("./events/", (err, files) => {
  if (err) console.log(err);

  let jsfile1 = files.filter(f => f.split(".").pop() === "js");
  if (jsfile1.length <= 0) {
    console.log("Could not find any events");
    return;
  }
  jsfile1.forEach(f => {
    const eventName = f.split(".")[0];
    console.log(`Loading Event: ${eventName}`);
    const event = require(`./events/${f}`);

    client.on(eventName, event.bind(null, client));
  });
});


client.reload = command => {
  return new Promise((resolve, reject) => {
    try {
      delete require.cache[require.resolve(`./komutlar/${command}`)];
      let cmd = require(`./komutlar/${command}`);
      client.commands.delete(command);
      client.aliases.forEach((cmd, alias) => {
        if (cmd === command) client.aliases.delete(alias);
      });
      client.commands.set(command, cmd);
      cmd.conf.aliases.forEach(alias => {
        client.aliases.set(alias, cmd.help.name);
      });
      resolve();
    } catch (e){
      reject(e);
    }
  });
};

client.load = command => {
  return new Promise((resolve, reject) => {
    try {
      let cmd = require(`./komutlar/${command}`);
      client.commands.set(command, cmd);
      cmd.conf.aliases.forEach(alias => {
        client.aliases.set(alias, cmd.help.name);
      });
      resolve();
    } catch (e){
      reject(e);
    }
  });
};

client.unload = command => {
  return new Promise((resolve, reject) => {
    try {
      delete require.cache[require.resolve(`./komutlar/${command}`)];
      let cmd = require(`./komutlar/${command}`);
      client.commands.delete(command);
      client.aliases.forEach((cmd, alias) => {
        if (cmd === command) client.aliases.delete(alias);
      });
      resolve();
    } catch (e){
      reject(e);
    }
  });
};

  
client.yetkiler = message => {
  if(!message.guild) {
	return; }
  let permlvl = -ayarlar.varsayilanperm  ;
  if(message.member.hasPermission("MANAGE_MESSAGES")) permlvl = 1;
  if(message.member.hasPermission("KICK_MEMBERS")) permlvl = 2;
  if(message.member.hasPermission("BAN_MEMBERS")) permlvl = 3;
  if(message.member.hasPermission("MANAGE_GUILD")) permlvl = 4;
  if(message.member.hasPermission("ADMINISTRATOR")) permlvl = 5;
  if(message.author.id === message.guild.ownerID) permlvl = 6;
  if(message.author.id === ayarlar.sahip) permlvl = 7;
  return permlvl;
};

///////////////////////////////KOMUTLAR//////////////////////////////
client.on('clickButton', async (button,message,guild) => {
  const { MessageEmbed } = require('discord.js'); //Define the discord.js module

const { MessageButton } = require('discord-buttons');
   
    
    
  if(button.id === "ev")
  {
    
       
  
await button.reply.defer(true); 
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Yardƒ±m Men√ºs√º")
  .setDescription(`<@${button.clicker.id}> Yardƒ±m men√ºs√ºne ho≈ü geldiniz . Umarƒ±m F-Bot'tan memnun kalmƒ±≈üsƒ±nƒ±zdƒ±r. 

‚Ä¢ Sunucuma nasƒ±l eklerim?
[Buraya tƒ±klayarak](https://discord.com/oauth2/authorize?client_id=848551626780573716&scope=bot&permissions=4259314903) F-Bot'!'u sunucunuza ekleyebilirsin.

‚Ä¢ Destek Sunucumuz
[Destek Sunucusuna](https://discord.gg/nnpAvPz) katƒ±larak sizde g√ºzel sohbetlere katƒ±labilirsiniz!

‚Ä¢ ƒ∞nternet Sitesi
[ƒ∞nternet Sitesine](https://f-bot.cf) bakabilirsiniz.

**Botun prefixini deƒüi≈ütirmek i√ßin -prefix**\n\n üè† > Ana Men√º\n üîß > Moderasyon\n üéà > Eƒülence\n üí† > Logo\n ‚öôÔ∏è > Ayarlar`)
  .setFooter(`F-Bot`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üí†') 
  .setID('logo') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üìë') 
  .setID('log') 
  let button4 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üéà') 
  .setID('eƒülence') 
let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1,button3,button4,button6,button2],
  embed: embed
})

    
  
    
  }
    if(button.id === "moderasyon")
  {
     
await button.reply.defer(true);
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Moderasyon Komutlarƒ±")
  .setDescription(`
> [-mute](https://discord.gg/evnWJBzwsc) ‚Üí  Etiketlediƒüin ki≈üiye mute atar!
> [-unmute](https://discord.gg/evnWJBzwsc) ‚Üí  Etiketlediƒüin ki≈üinin mutesini a√ßar!
> [-hgmesaj](https://discord.gg/evnWJBzwsc) ‚Üí  Ho≈ü geldin mesajƒ±nƒ± ayarlamanƒ±zƒ± saƒülar.
> [-hgdmmesaj](https://discord.gg/evnWJBzwsc) ‚Üí  Ho≈ü geldin mesajƒ±nƒ± ayarlamanƒ±zƒ± saƒülar.
> [-ta√ß](https://discord.gg/evnWJBzwsc) ‚Üí Sunucunun sahibini g√∂sterir.
> [-sil](https://discord.gg/evnWJBzwsc) ‚Üí Yazdƒ±ƒüƒ±nƒ±z miktarda mesajƒ± siler.
> [-ban](https://discord.gg/evnWJBzwsc) ‚Üí Etiketlediƒüiniz ki≈üiyi sunucudan banlarsƒ±nƒ±z.
> [-duyuru](https://discord.gg/evnWJBzwsc) ‚Üí Bot yazdƒ±gƒ±nƒ±n mesajƒ± duyuru yapar.
> [-otorol-a√ß](https://discord.gg/evnWJBzwsc) ‚Üí Otorol√º a√ßar.
> [-otorol](https://discord.gg/evnWJBzwsc) ‚Üí Otorol ayarlar.
> [-antispam](https://discord.gg/evnWJBzwsc) ‚Üí Spam engelleyici.
> [-kilit](https://discord.gg/evnWJBzwsc) ‚Üí Kanalƒ± kitler.
> [-rr](https://discord.gg/evnWJBzwsc) ‚Üí Tepki rol√º ayarlar.
> [-rrdelete](https://discord.gg/evnWJBzwsc) ‚Üí Ayarlanmƒ±≈ü tepki rol√ºn√º siler.
 \n1Ô∏è‚É£üîß > Moderasyon Sayfa 1
 2Ô∏è‚É£üîß > Moderasyon Sayfa 2
üìë > Log Komutlarƒ±`)
    .setFooter(`F-Bot | Moderasyon`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üí†') 
  .setID('logo') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üìë') 
  .setID('log') 
let button4 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üîß') 
  .setID('moderasyon2') 
let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1,button3,button4,button5,button2],
  embed: embed
})

    
  

    
  }
      if(button.id === "moderasyon2")
  {
     
await button.reply.defer(true); 
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Moderasyon Komutlarƒ±")
  .setDescription(`
> [-k√ºf√ºr](https://discord.gg/evnWJBzwsc) ‚Üí K√ºf√ºr engel sistemini a√ßarsƒ±nƒ±z.
> [-reklam](https://discord.gg/evnWJBzwsc) ‚Üí Reklam engel sistemi a√ßarsƒ±nƒ±z.
> [-slowmode](https://discord.gg/evnWJBzwsc) ‚Üí Yava≈ü modu ayarlarsƒ±nƒ±z. 
> [-unban](https://discord.gg/evnWJBzwsc) ‚Üí Birisinin banƒ±nƒ± a√ßarsƒ±nƒ±z.
> [-sa-as](https://discord.gg/evnWJBzwsc) ‚Üí  Sa-As sistemini aktif eder.
> [-sunucubilgi](https://discord.gg/evnWJBzwsc) ‚Üí  Sunucu hakkƒ±nda bilgi verir.
> [-√ºyedurum](https://discord.gg/evnWJBzwsc) ‚Üí  Sunucu √ºyeleri hakkƒ±nda bilgi verir.
> [-kanalkoruma](https://discord.gg/evnWJBzwsc) ‚Üí  Kanal koruma sistemini a√ßar.
> [-rolkoruma](https://discord.gg/evnWJBzwsc) ‚Üí  Rol koruma sistemini a√ßar.
> [-√ßekili≈ü](https://discord.gg/evnWJBzwsc) ‚Üí  √áekili≈ü yapar.
> [-etkitepki](https://discord.gg/evnWJBzwsc) ‚Üí  Nasƒ±lsƒ±n,ƒ∞yi geceler,g√ºnaydƒ±n gibi mesajlara cevap verir.
> [-nuke](https://discord.gg/evnWJBzwsc) ‚Üí Kanala bomba atar.
> [-ticket-yardƒ±m](https://discord.gg/evnWJBzwsc) ‚Üí Ticket sistemi yardƒ±m men√ºs√ºn√º a√ßar.

 \n1Ô∏è‚É£üîß > Moderasyon Sayfa 1
 2Ô∏è‚É£üîß > Moderasyon Sayfa 2
üìë > Log Komutlarƒ±`)
    .setFooter(`F-Bot | Moderasyon`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üí†') 
  .setID('logo') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üìë') 
  .setID('log') 
let button4 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üîß') 
  .setID('moderasyon2') 
let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1,button3,button4,button5,button2],
  embed: embed
})

    
  

    
  }
        if(button.id === "log")
  {
     
await button.reply.defer(true);
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Log Komutlarƒ±")
  .setDescription(`
> [-banlog](https://discord.gg/evnWJBzwsc) ‚Üí Banlama logunu ayarlar.
> [-bana√ßmalog](https://discord.gg/evnWJBzwsc) ‚Üí Ban a√ßma logunu ayarlar.
> [-buglog](https://discord.gg/evnWJBzwsc) ‚Üí Bug logunu ayarlar.
> [-emojia√ßmalog](https://discord.gg/evnWJBzwsc) ‚Üí Emoji A√ßma logunu ayarlar. 
> [-emojisilmelog](https://discord.gg/evnWJBzwsc) ‚Üí Emoji Silme logunu ayarlar. 
> [-giri≈ülog](https://discord.gg/evnWJBzwsc) ‚Üí Giri≈ü logunu ayarlar.
> [-√ßƒ±kƒ±≈ülog](https://discord.gg/evnWJBzwsc) ‚Üí √áƒ±kƒ±≈ü logunu ayarlar.  
> [-ho≈ügeldinlog](https://discord.gg/evnWJBzwsc) ‚Üí Ho≈ü geldin kanalƒ±nƒ± ayarlar.
> [-hgmesaj](https://discord.gg/evnWJBzwsc) ‚Üí  Ho≈ü geldin mesajƒ±nƒ± ayarlamanƒ±zƒ± saƒülar.
> [-hgdmmesaj](https://discord.gg/evnWJBzwsc) ‚Üí  Ho≈ü geldin DM mesajƒ±nƒ± ayarlamanƒ±zƒ± saƒülar.
> [-isimlog](https://discord.gg/evnWJBzwsc) ‚Üí ƒ∞sim log kanalƒ± ayarlar.
\n1Ô∏è‚É£üìë > Log Sayfa 1
 2Ô∏è‚É£üìë > Log Sayfa 2`)
    .setFooter(`F-Bot | Log`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üí†') 
  .setID('logo') 
        let button7 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üìë') 
  .setID('log2') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üìë') 
  .setID('log') 

let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1,button3,button7,button2],
  embed: embed
})

    
  

    
  }
          if(button.id === "log2")
  {
     
await button.reply.defer(true); 
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Log Komutlarƒ±")
  .setDescription(`
> [-kanala√ßmalog](https://discord.gg/evnWJBzwsc) ‚Üí  Kanal A√ßma logunu ayarlar. 
> [-kanalsilmelog](https://discord.gg/evnWJBzwsc) ‚Üí  Kanal silme logunu ayarlar.
> [-mesajsilmelog](https://discord.gg/evnWJBzwsc) ‚Üí Mesaj Silme logunu ayarlar.
> [-mesajg√ºncellemelog](https://discord.gg/evnWJBzwsc) ‚Üí Mesaj Silme logunu ayarlar.
> [-rola√ßmalog](https://discord.gg/evnWJBzwsc) ‚Üí Rol A√ßma logunu ayarlar.
> [-rolsilmelog](https://discord.gg/evnWJBzwsc) ‚Üí Rol Silme logunu ayarlar.
> [-rolg√ºncellemelog](https://discord.gg/evnWJBzwsc) ‚Üí Rol G√ºncelleme logunu ayarlar.
> [-roldeƒüi≈ütirmelog](https://discord.gg/evnWJBzwsc) ‚Üí Rol Deƒüi≈ütirme logunu ayarlar.
> [-isimlog](https://discord.gg/evnWJBzwsc) ‚Üí ƒ∞sim Deƒüi≈ütirme logunu ayarlar.
> [-kanalkorumalog](https://discord.gg/evnWJBzwsc) ‚Üí Kanal koruma logunu ayarlar 
> [-isteklog](https://discord.gg/evnWJBzwsc) ‚Üí ƒ∞stek logunu ayarlar.

\n1Ô∏è‚É£üìë > Log Sayfa 1
 2Ô∏è‚É£üìë > Log Sayfa 2`)
    .setFooter(`F-Bot | Log`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üí†') 
  .setID('logo') 
        let button7 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üìë') 
  .setID('log2') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üìë') 
  .setID('log') 

let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1,button3,button5,button2],
  embed: embed
})

    
  

    
  }
        if(button.id === "eƒülence")
  {
     
await button.reply.defer(true); 
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Eƒülence Komutlarƒ±")
  .setDescription(`
> [-a≈ük-√∂l√ß](https://discord.gg/evnWJBzwsc) ‚Üí Etiketlediƒüin ki≈üinin a≈ükƒ±nƒ± √∂l√ßer.
> [-espri](https://discord.gg/evnWJBzwsc) ‚Üí F-Bot senin i√ßin espiri yapar.
> [-d√ºello](https://discord.gg/evnWJBzwsc) ‚Üí Etiketlediƒüin ki≈üiyle d√ºello atarsƒ±n.
> [-balƒ±ktut](https://discord.gg/evnWJBzwsc) ‚Üí Balƒ±k tutasƒ±n.
> [-aƒüla](https://discord.gg/evnWJBzwsc) ‚Üí Bot U Aƒülatƒ±rsƒ±nƒ±z.
> [-≈üanslƒ±sayƒ±m](https://discord.gg/evnWJBzwsc) ‚Üí ≈ûanslƒ± sayƒ±nƒ± senin yerine bulur.
> [-wasted](https://discord.gg/evnWJBzwsc) ‚Üí Yakalandƒ±n pislik herif.
> [-zarat](https://discord.gg/evnWJBzwsc) ‚Üí Zar atar.
\n1Ô∏è‚É£üéà > Eƒülence Sayfa 1
 2Ô∏è‚É£üéà > Eƒülence Sayfa 2
üòê > Kullanƒ±cƒ±`)
    .setFooter(`F-Bot | Eƒülence`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üòê') 
  .setID('kullanƒ±cƒ±') 
        let button7 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üéà') 
  .setID('eƒülence2') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üéà') 
  .setID('eƒülence') 

let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1,button5,button7,button6,button2],
  embed: embed
})
      }
            if(button.id === "eƒülence2")
  {
     
await button.reply.defer(true);
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Eƒülence Komutlarƒ±")
  .setDescription(`
> [-emojiyazƒ±](https://discord.gg/evnWJBzwsc) ‚Üí Yazdƒ±ƒüƒ±n mesajdan emojiyle yazƒ± yazar.
> [-yazan-kazanƒ±r](https://discord.gg/evnWJBzwsc) ‚Üí Etiketlediƒüin ki≈üiyle yazan kazanƒ±r oynayabilirsiniz.
> [-duello](https://discord.gg/evnWJBzwsc) ‚Üí Etiketlediƒüin ki≈üiyle duello oynayabilirsiniz.
> [-adamasmaca](https://discord.gg/evnWJBzwsc) ‚Üí Adam asmaca oyununu oynayabilirsiniz..
> [-twit](https://discord.gg/evnWJBzwsc) ‚Üí Twit atar.
> [-insta](https://discord.gg/evnWJBzwsc) ‚Üí ƒ∞nstagram postu atar.
> [-≈üi≈üe](https://discord.gg/evnWJBzwsc) ‚Üí ≈ûi≈üe √ßevirmece oynatƒ±r.
> [-ta≈ükaƒüƒ±tmakas](https://discord.gg/evnWJBzwsc) ‚Üí Ta≈ü kaƒüƒ±t makas oyunu oynatƒ±r.
\n1Ô∏è‚É£üéà > Log Sayfa 1
 2Ô∏è‚É£üéà > Log Sayfa 2
üòê > Kullanƒ±cƒ±`)
    .setFooter(`F-Bot | Eƒülence`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üòê') 
  .setID('kullanƒ±cƒ±') 
        let button7 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üéà') 
  .setID('eƒülence2') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üéà') 
  .setID('eƒülence') 

let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1,button5,button7,button6,button2],
  embed: embed
})
      }
            if(button.id === "kullanƒ±cƒ±")
  {
     
await button.reply.defer(true);
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Kullanƒ±cƒ± Komutlarƒ±")
  .setDescription(`
> [-profil](https://discord.gg/evnWJBzwsc) ‚Üí Kendinin profilini g√∂r√ºrs√ºn√ºz.
> [-ilet](https://discord.gg/evnWJBzwsc) ‚Üí Yapƒ±mcƒ±ma yazdƒ±ƒüƒ±nƒ±z yazƒ±yƒ± iletir!.
> [-roleinfo](https://discord.gg/evnWJBzwsc) ‚Üí Yazdƒ±ƒüƒ±n rol√ºn bilgisini verir.. 
> [-toplamkomut](https://discord.gg/evnWJBzwsc) ‚Üí Botta ne kadar komut oldunu g√∂sterir.
> [-avatar](https://discord.gg/evnWJBzwsc) ‚Üí Etiketlediƒüin birisinin avatarƒ±nƒ± g√∂sterir.
> [-yetkilerim](https://discord.gg/evnWJBzwsc) ‚Üí Hangi yetkilere sahip olduƒüunuzu g√∂sterir.
> [-sunucuresmi](https://discord.gg/evnWJBzwsc) ‚Üí Sunucu resmini g√∂sterir.
> [-ping](https://discord.gg/evnWJBzwsc) ‚Üí Botun Pingine Bakarsƒ±n. 
> [-davet](https://discord.gg/evnWJBzwsc) ‚Üí beni sunucuna ekle.
> [-bug-bildir](https://discord.gg/evnWJBzwsc) ‚Üí Yazdƒ±ƒüƒ±nƒ±z bug'u yapƒ±mcƒ±larƒ±ma bildirir.
> [-istek-kod](https://discord.gg/evnWJBzwsc) ‚Üí Yazdƒ±ƒüƒ±nƒ±z istek kodu yapƒ±mcƒ±larƒ±ma bildirir.
> [-sunucu](https://discord.gg/evnWJBzwsc) ‚Üí Sunucunun bilgilerini verir.`)
    .setFooter(`F-Bot | Kullanƒ±cƒ±`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üí†') 
  .setID('logo') 
        let button7 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üìë') 
  .setID('log2') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üìë') 
  .setID('log') 

let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1,button2],
  embed: embed
})

    
  

    
  }
            if(button.id === "logo")
  {
     
await button.reply.defer(true); 
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Logo Komutlarƒ±")
  .setDescription(`
> [-grafiti](https://discord.gg/evnWJBzwsc) ‚Üí grafiti logo olu≈üturur. 
> [-discord](https://discord.gg/evnWJBzwsc) ‚Üí discord logo olu≈üturur. 
> [-gold](https://discord.gg/evnWJBzwsc) ‚Üí gold logo olu≈üturur. 
> [-comic](https://discord.gg/evnWJBzwsc) ‚Üí comic logo olu≈üturur. 
> [-bubble](https://discord.gg/evnWJBzwsc) ‚Üí bubble logo olu≈üturur. 
> [-bubble2](https://discord.gg/evnWJBzwsc) ‚Üí bubble2 logo olu≈üturur. 
> [-buz](https://discord.gg/evnWJBzwsc) ‚Üí buz logosu olu≈üturur. 
> [-rainbow](https://discord.gg/evnWJBzwsc) ‚Üí rainbow logo olu≈üturur. 
> [-scifi](https://discord.gg/evnWJBzwsc) ‚Üí scifi logosu olu≈üturur. 
> [-bling](https://discord.gg/evnWJBzwsc) ‚Üí bling logosu olu≈üturur. 
> [-redtext](https://discord.gg/evnWJBzwsc) ‚Üí Kƒ±rmƒ±zƒ± logo olu≈üturur. 
> [-mavitext](https://discord.gg/evnWJBzwsc) ‚Üí Mavi logo olu≈üturur. 
\n1Ô∏è‚É£üí† > Logo Sayfa 1
 2Ô∏è‚É£üí† > Logo Sayfa 2
 3Ô∏è‚É£üí† > Logo Sayfa 3`)
    .setFooter(`F-Bot | Logo`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
      let button9 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('3Ô∏è‚É£üí†') 
  .setID('logo3') 
     let button8 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üí†') 
  .setID('logo2') 
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üí†') 
  .setID('logo') 
        let button7 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üìë') 
  .setID('log2') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üìë') 
  .setID('log') 

let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1,button6,button8,button9,button2],
  embed: embed
})

    
  

    
  }
              if(button.id === "logo2")
  {
     
await button.reply.defer(true);
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Logo Komutlarƒ±")
  .setDescription(`
> [-dinamik](https://discord.gg/evnWJBzwsc) ‚Üí dinamik logo olu≈üturur. 
> [-altƒ±n](https://discord.gg/evnWJBzwsc) ‚Üí altƒ±n logo olu≈üturur. 
> [-banner](https://discord.gg/evnWJBzwsc) ‚Üí banner logo olu≈üturur. 
> [-basit](https://discord.gg/evnWJBzwsc) ‚Üí basit logo olu≈üturur. 
> [-elmas](https://discord.gg/evnWJBzwsc) ‚Üí elmas logo olu≈üturur. 
> [-neonmavi](https://discord.gg/evnWJBzwsc) ‚Üí neonmavi logo olu≈üturur. 
> [-kalƒ±n](https://discord.gg/evnWJBzwsc) ‚Üí kalƒ±n logo olu≈üturur. 
\n1Ô∏è‚É£üí† > Logo Sayfa 1
 2Ô∏è‚É£üí† > Logo Sayfa 2
 3Ô∏è‚É£üí† > Logo Sayfa 3`)
    .setFooter(`F-Bot | Logo`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
      let button9 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('3Ô∏è‚É£üí†') 
  .setID('logo3') 
     let button8 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üí†') 
  .setID('logo2') 
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üí†') 
  .setID('logo') 
        let button7 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üìë') 
  .setID('log2') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üìë') 
  .setID('log') 

let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1,button6,button8,button9,button2],
  embed: embed
})

    
  

    
  }
                if(button.id === "logo3")
  {
     
await button.reply.defer(true); 
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Logo Komutlarƒ±")
  .setDescription(`
> [-anime](https://discord.gg/evnWJBzwsc) ‚Üí anime logo olu≈üturur. 
> [-habbo](https://discord.gg/evnWJBzwsc) ‚Üí habbo logo olu≈üturur. 
> [-arrow](https://discord.gg/evnWJBzwsc) ‚Üí arrow logo olu≈üturur. 
> [-green](https://discord.gg/evnWJBzwsc) ‚Üí green logo olu≈üturur. 
> [-alev](https://discord.gg/evnWJBzwsc) ‚Üí alev logo olu≈üturur. 
> [-red](https://discord.gg/evnWJBzwsc) ‚Üí red logo olu≈üturur. 
> [-kalp](https://discord.gg/evnWJBzwsc) ‚Üí kalp logo olu≈üturur. 
\n1Ô∏è‚É£üí† > Logo Sayfa 1
 2Ô∏è‚É£üí† > Logo Sayfa 2
 3Ô∏è‚É£üí† > Logo Sayfa 3`)
    .setFooter(`F-Bot | Logo`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
      let button9 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('3Ô∏è‚É£üí†') 
  .setID('logo3') 
     let button8 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üí†') 
  .setID('logo2') 
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üí†') 
  .setID('logo') 
        let button7 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üìë') 
  .setID('log2') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üìë') 
  .setID('log') 

let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1,button6,button8,button9,button2],
  embed: embed
})

    
  

    
  }
                  if(button.id === "ayarlar")
  {
      if (button.channel.type === "dm") return;
    //ban log
    let banlogg = await db.fetch(`banlog_${button.guild.id}`)
    if(banlogg === null)
    {banlogg = "Ayarlanmamƒ±≈ü"}
   else{let banlog = db.fetch(`banlog_${button.guild.id}`)
    banlogg = `<#`+banlog+`>`}
     //ban a√ßma log
    let bana√ßmalog = await db.fetch(`bana√ßmalog_${button.guild.id}`)
    if(bana√ßmalog === null)
    {bana√ßmalog = "Ayarlanmamƒ±≈ü"}
   else{let banlog = db.fetch(`bana√ßmalog_${button.guild.id}`)
    bana√ßmalog = `<#`+banlog+`>`}
    //mesajlog
     let mesajsilmelog = await db.fetch(`mesajsilmelog_${button.guild.id}`)
    if(mesajsilmelog === null)
    {mesajsilmelog = "Ayarlanmamƒ±≈ü"}
    else{let mesajlog = db.fetch(`mesajsilmelog_${button.guild.id}`)
    mesajsilmelog = `<#`+mesajlog+`>`}
    //mesajlog
     let mesajg√ºncellemelog = await db.fetch(`mesajg√ºncellemelog_${button.guild.id}`)
    if(mesajg√ºncellemelog === null)
    {mesajg√ºncellemelog = "Ayarlanmamƒ±≈ü"}
    else{let mesajlog = db.fetch(`mesajg√ºncellemelog_${button.guild.id}`)
    mesajg√ºncellemelog = `<#`+mesajlog+`>`}
      //rol A√ßma log
     let rola√ßmalog = await db.fetch(`rola√ßmalog_${button.guild.id}`)
    if(rola√ßmalog === null)
    {rola√ßmalog = "Ayarlanmamƒ±≈ü"}
    else{let rollog = db.fetch(`rola√ßmalog_${button.guild.id}`)
    rola√ßmalog = `<#`+rollog+`>`}
        //rol Silme log
     let rolsilmelog = await db.fetch(`rolsilmelog_${button.guild.id}`)
    if(rolsilmelog === null)
    {rolsilmelog = "Ayarlanmamƒ±≈ü"}
    else{let rollog = db.fetch(`rolsilmelog_${button.guild.id}`)
    rolsilmelog = `<#`+rollog+`>`}
     //rol G√ºncelleme log
     let rolg√ºncellemelog = await db.fetch(`rolg√ºncellemelog_${button.guild.id}`)
    if(rolg√ºncellemelog === null)
    {rolg√ºncellemelog = "Ayarlanmamƒ±≈ü"}
    else{let rollog = db.fetch(`rolg√ºncellemelog_${button.guild.id}`)
    rolg√ºncellemelog = `<#`+rollog+`>`}
     //rol Deƒüi≈ütirme log
     let roldeƒüi≈ütirmelog = await db.fetch(`roldeƒüi≈ütirmelog_${button.guild.id}`)
    if( roldeƒüi≈ütirmelog  === null)
    { roldeƒüi≈ütirmelog  = "Ayarlanmamƒ±≈ü"}
    else{let rollog = db.fetch(`roldeƒüi≈ütirmelog_${button.guild.id}`)
     roldeƒüi≈ütirmelog  = `<#`+rollog+`>`}
 
     //kanal log
     let kanallogg = await db.fetch(`klog_${button.guild.id}`)
    if(kanallogg === null)
    {kanallogg = "Ayarlanmamƒ±≈ü"}
    else{let kanallog = db.fetch(`klog_${button.guild.id}`)
    kanallogg = `<#`+kanallog+`>`}
       //kanal korukma log
     let kalogg = await db.fetch(`kalog${button.guild.id}`)
    if(kalogg === null)
    {kalogg = "Ayarlanmamƒ±≈ü"}
    else{let kalog = db.fetch(`kalog${button.guild.id}`)
    kalogg = `<#`+kalog+`>`}
     //istek
     let ilogg = await db.fetch(`ilog_${button.guild.id}`)
    if(ilogg === null)
    {ilogg = "Ayarlanmamƒ±≈ü"}
    else{let ilog = db.fetch(`ilog_${button.guild.id}`)
    ilogg = `<#`+ilog+`>`}
      //isim
     let isimlog = await db.fetch(`isimlog_${button.guild.id}`)
    if(isimlog === null)
    {isimlog = "Ayarlanmamƒ±≈ü"}
    else{let isimlog1 = db.fetch(`isimlog_${button.guild.id}`)
    isimlog = `<#`+isimlog1+`>`}
      //emoji a√ßma log
     let emojia√ßmalog = await db.fetch(`emojia√ßmalog_${button.guild.id}`)
    if(emojia√ßmalog === null)
    {emojia√ßmalog = "Ayarlanmamƒ±≈ü"}
    else{let elog1 = db.fetch(`emojia√ßmalog_${button.guild.id}`)
    emojia√ßmalog = `<#`+elog1+`>`}
       //emoji silme log
     let emojisilmelog = await db.fetch(`emojisilmelog_${button.guild.id}`)
    if(emojisilmelog === null)
    {emojisilmelog = "Ayarlanmamƒ±≈ü"}
    else{let elog1 = db.fetch(`emojisilmelog_${button.guild.id}`)
    emojisilmelog = `<#`+elog1+`>`}
    //giri≈ü√ßƒ±kƒ±≈ü
     let g√ßlog = await db.fetch(`g√ßlog_${button.guild.id}`)
    if(g√ßlog === null)
    {g√ßlog = "Ayarlanmamƒ±≈ü"}
    else{let g√ßlog1 = db.fetch(`g√ßlog_${button.guild.id}`)
    g√ßlog = `<#`+g√ßlog1+`>`}
     //ho≈ügeldin
     let hglog = await db.fetch(`hglog_${button.guild.id}`)
    if(hglog === null)
    {hglog = "Ayarlanmamƒ±≈ü"}
    else{let hglog1 = db.fetch(`hglog_${button.guild.id}`)
    hglog = `<#`+hglog1+`>`}
     //giri≈ü
     let giri≈ülog = await db.fetch(`giri≈ülog_${button.guild.id}`)
    if(giri≈ülog === null)
    {giri≈ülog= "Ayarlanmamƒ±≈ü"}
    else{let g√ßlog1 = db.fetch(`giri≈ülog_${button.guild.id}`)
    giri≈ülog = `<#`+g√ßlog1+`>`}
     //g√ßƒ±kƒ±≈ü
     let √ßƒ±kƒ±≈ülog = await db.fetch(`√ßƒ±kƒ±≈ülog_${button.guild.id}`)
    if(√ßƒ±kƒ±≈ülog === null)
    {√ßƒ±kƒ±≈ülog = "Ayarlanmamƒ±≈ü"}
    else{let g√ßlog1 = db.fetch(`√ßƒ±kƒ±≈ülog_${button.guild.id}`)
    √ßƒ±kƒ±≈ülog = `<#`+g√ßlog1+`>`}
         //kanal a√ßma log
     let kanala√ßmalog = await db.fetch(`kanala√ßmalog_${button.guild.id}`)
    if(kanala√ßmalog === null)
    {kanala√ßmalog = "Ayarlanmamƒ±≈ü"}
    else{let g√ßlog1 = db.fetch(`kanala√ßmalog_${button.guild.id}`)
    kanala√ßmalog= `<#`+g√ßlog1+`>`}
      //kanal silme log
     let kanalsilmelog = await db.fetch(`kanalsilmelog_${button.guild.id}`)
    if(kanalsilmelog === null)
    {kanalsilmelog = "Ayarlanmamƒ±≈ü"}
    else{let g√ßlog1 = db.fetch(`kanalsilmelog_${button.guild.id}`)
    kanalsilmelog = `<#`+g√ßlog1+`>`}
      //ho≈ügeldin mesaj
     let ho≈ügeldinmesaj = await db.fetch(`hgmesaj_${button.guild.id}`)
    if(ho≈ügeldinmesaj === null)
    {ho≈ügeldinmesaj = "Ayarlanmamƒ±≈ü"}
    else{let g√ßlog1 = db.fetch(`hgmesaj_${button.guild.id}`)
    ho≈ügeldinmesaj = `<#`+g√ßlog1+`>`}
      //ho≈ügeldin dm mesaj
     let ho≈ügeldindmmesaj = await db.fetch(`hgdmmesaj_${button.guild.id}`)
    if(ho≈ügeldindmmesaj === null)
    {ho≈ügeldindmmesaj = "Ayarlanmamƒ±≈ü"}
    else{let g√ßlog1 = db.fetch(`hgdmmesaj_${button.guild.id}`)
    ho≈ügeldindmmesaj = `<#`+g√ßlog1+`>`}
    
    //kanalkoruma
      let kanalkoruma = await db.fetch(`kanalk_${button.guild.id}`)
    if(kanalkoruma === null)
    {kanalkoruma = `üî¥Kapalƒ±`}
    else{kanalkoruma = `üü¢A√ßƒ±k`}
    //anti spam
     let antispam = await db.fetch(`antispam_${button.guild.id}`)
    if(antispam === null)
    {antispam = `üî¥Kapalƒ±`}
    else{antispam = `üü¢A√ßƒ±k`}
    //rol koruma
      let rolk = await db.fetch(`rolk_${button.guild.id}`)
    if(rolk === null)
    {rolk = `üî¥Kapalƒ±`}
    else{rolk = `üü¢A√ßƒ±k`}
    //k√ºf√ºr
     let k√ºf√ºrengel = await db.fetch(`k√ºf√ºrengel_${button.guild.id}`)
    if(k√ºf√ºrengel === null)
    {k√ºf√ºrengel = `üî¥Kapalƒ±`}
    else{k√ºf√ºrengel = `üü¢A√ßƒ±k`}
    //reklam
       let reklam = await db.fetch(`reklamFiltre_${button.guild.id}`)
    if(reklam === null)
    {reklam = `üî¥Kapalƒ±`}
    else{reklam = `üü¢A√ßƒ±k`}
    //seviye
     let seviye = await db.fetch(`seviyeacik_${button.guild.id}`)
    if(seviye === null)
    {seviye = `üî¥Kapalƒ±`}
    else{seviye = `üü¢A√ßƒ±k`}
await button.reply.defer(true); 
  var embed = new Discord.MessageEmbed()
  .setColor("RED")
  .setTitle("Ayarlar")
  //{ name: '\u200B', value: '\u200B' }, g√∂r√ºnmez 1 satƒ±r yapmak i√ßin
  	.addFields(
      	{ name: '``Anti Spam``', value: `**${antispam}**`, inline: true },
		{ name: '``Kanal Koruma``', value: `**${kanalkoruma}**`, inline: true },
      		{ name: '``Rol Koruma``', value: `**${rolk}**`, inline: true },
      		{ name: '``K√ºf√ºr Filtre``', value: `**${k√ºf√ºrengel}**`, inline: true },
      		{ name: '``Reklam Filtre``', value: `**${reklam}**`, inline: true },
      	{ name: '``Seviye Sistemi``', value: `**${seviye}**`, inline: true },
      { name: '\u200B', value: '\u200B' },
    { name: '``Ban``', value: `**Banlama Log:** ${banlogg} \n**Ban A√ßma Log:** ${bana√ßmalog}`, inline: true  },
      	{ name: '``Mesaj``', value: `**Mesaj Silme log:** ${mesajsilmelog} \n**Mesaj Edit Log:** ${mesajg√ºncellemelog}`, inline: true  },
         { name: '\u200B', value: '\u200B' },
       	{ name: '``Kanal``', value: `**Kanal A√ßma Log:** ${kanala√ßmalog} \n**Kanal Silme Log:** ${kanalsilmelog}`, inline: true  },
      	{ name: '``Rol``', value: `**Rol A√ßma Log:** ${rola√ßmalog} \n **Rol Silme Log:** ${rolsilmelog} \n**Rol G√ºncelleme Log:** ${rolg√ºncellemelog} \n **Rol Deƒüi≈ütirme Log:** ${roldeƒüi≈ütirmelog}`, inline: true  },
     { name: '\u200B', value: '\u200B' },
   { name: '``Emoji``', value: `**Emoji A√ßma Log:** ${emojia√ßmalog} \n**Emoji Silme Log:** ${emojisilmelog}`, inline: true  },
    { name: '``Giri≈ü-√áƒ±kƒ±≈ü``', value: `**Giri≈ü Log:** ${giri≈ülog} \n**√áƒ±kƒ±≈ü Log:** ${√ßƒ±kƒ±≈ülog} \n **Ho≈ügeldin Log:** ${hglog}`, inline: true  },
   { name: '\u200B', value: '\u200B' },
      { name: '``Diƒüer``', value: `**Kanal Koruma Log:** ${kalogg} \n **ƒ∞stek Log:** ${ilogg} \n **ƒ∞sim Log:** ${isimlog}`, inline: true  },
{ name: '``Mesajlar``', value: `**HG mesaj:** ${ho≈ügeldinmesaj} \n **HG dm mesaj:** ${ho≈ügeldindmmesaj}`, inline: true  },
	)
  


    .setFooter(`F-Bot | Ayarlar`,"https://cdn.discordapp.com/attachments/836533918760042508/871411306878615593/presF.png")
  .setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
  .setTimestamp();
      let button9 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('3Ô∏è‚É£üí†') 
  .setID('logo3') 
     let button8 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üí†') 
  .setID('logo2') 
    let button6 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üí†') 
  .setID('logo') 
        let button7 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('2Ô∏è‚É£üìë') 
  .setID('log2') 
      let button5 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('1Ô∏è‚É£üìë') 
  .setID('log') 

let button3 = new disbut.MessageButton()
  .setStyle('green')
  .setLabel('üîß') 
  .setID('moderasyon') 
let button2 = new disbut.MessageButton()
  .setStyle('red')
  .setLabel('‚öôÔ∏è') 
  .setID('ayarlar') 
let button1 = new disbut.MessageButton()
  .setStyle('blurple')
  .setLabel('üè†') 
  .setID('ev') 
    


 button.message.edit(
{
buttons: [button1],
  embed: embed
})

    
  

    
  }
});
client.on("message", message => {
    if (message.channel.type === "dm") {
       
let Crewembed = new Discord.MessageEmbed()
         .setTitle(`${client.user.username}'a √ñzelden Mesaj G√∂nderildi!`)
         .setColor('RANDOM')
         .setTimestamp()
        .addField('G√∂nderilen Mesaj',` \`\`\` ${message.content}\`\`\` `)
         .addField('Mesajƒ± G√∂nderen',message.author.tag)
        .addField('Mesajƒ± G√∂nderenin ID',message.author.id)
        .setThumbnail(message.author.avatarURL({dynamic:true}))
        .setFooter(`F-Bot `,client.user.avatarURL({dynamic:true}))
    client.channels.cache.get('848874739984498689').send(Crewembed);
    }
});
client.on("message", async message => {
    if(message.author.bot) return;
      if (message.channel.type === "dm") return;
    let i = await db.fetch(`reklamFiltre_${message.guild.id}`)  
          if (i == 'acik') {
              const reklam = ["https://","http://","discord.gg",
      "discord.gg",
      ".com",
      ".net",
      ".xyz",
      ".tk",
      ".pw",
      ".io",
      ".me",
      ".gg",
      "www.",
      "https",
      "http",
      ".gl",
      ".org",
      ".com.tr",
      ".biz",
      ".party",
      ".rf.gd",
      ".az"]
              if (reklam.some(word => message.content.toLowerCase().includes(word))) {
                try {
                  if (!message.member.hasPermission("MANAGE_MESSAGES")) {
                    message.delete();                                       
                      let Crewembed = new Discord.MessageEmbed()
                .setDescription(`<a:alertt:848517606788038666><@${message.author.id}> Reklam Yapmak Yasak!`)
                    return message.channel.send(Crewembed).then(msg => {
    msg.delete({ timeout: 10000 })
  })
                  }              
                } catch(err) {
                  console.log(err);
                }
              }
          }
          if (!i) return;
          });    
//client.on("message", message => {
  //  const kufur =  ["mk", "amk", "orospu", "oruspu", "o√ß", "sikerim", "yarrak", "pi√ß", "amq", "sik", "amcƒ±k", "sex", "seks", "amƒ±na", "orospu √ßocuƒüu", "siktir git"];
  //  if (kufur.some(word => message.content.includes(word)) ) {
  //      message.reply("K√ºf√ºrl√º & Argolu kelimeler kullanma! ")
   //     message.delete()
  //  }
//});
///////////////////////////////////////////////////////////////////////////////////////////////
function getFirstTextChannel(guild) {
    const textchannels = guild.channels.cache.filter(channel => channel.type == 'text' && channel.rawPosition == 1);
    return textchannels.values().next().value;
}
client.on("guildCreate", guild => {
  const embo = new Discord.MessageEmbed()
.setTitle("F-Bot'u sunucunuza eklediƒüiniz i√ßin te≈üekk√ºrler. Umarƒ±m memnun kalƒ±rsƒ±nƒ±z. ")
.setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
 .setDescription(`
‚Ä¢ Sunucuma nasƒ±l eklerim?
[Buraya tƒ±klayarak](https://discord.com/oauth2/authorize?client_id=685189238332850256&scope=bot&permissions=4259314903) F-Bot'u sunucunuza ekleyebilirsin.

‚Ä¢ Destek Sunucumuz
[Destek Sunucusuna](https://discord.gg/nnpAvPz) katƒ±larak sizde g√ºzel sohbetlere katƒ±labilirsiniz!

‚Ä¢ ƒ∞nternet Sitesi
[ƒ∞nternet Sitesine](https://f-bot.cf) bakabilirsiniz.
`)
.setTimestamp()
 .setFooter(`F-Bot`,"https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif");
client.users.cache.get(guild.ownerID).send(embo).catch(err => console.log(err));
    getFirstTextChannel(guild).send(embo).catch(err => console.log(err));
  
})
client.on("message", async message => {
    if(message.author.bot) return;
     if (message.channel.type === "dm") return;
    let i = await db.fetch(`k√ºf√ºrengel_${message.guild.id}`)  
          if (i == 'acik') {
      const kufur = ["sg","o√ß","o√ße","anan","ananƒ±","ananƒ± sikim","anneni sikim","anneni sikeyim","ananƒ± sikeyim","annen","aƒüzƒ±na","aƒüzƒ±na sƒ±√ßim","aƒüzƒ±na sƒ±√ßayƒ±m","aƒüzƒ±na s","am","ambiti","amƒ±nƒ±","amƒ±nƒ± s","amcƒ±k","amcik","amcƒ±ƒüƒ±nƒ±","amciƒüini","amcƒ±ƒüƒ±nƒ±","amcƒ±ƒüƒ±nƒ± s","amck","amckskm","amcuk","amƒ±na","amƒ±na k","amƒ±nakoyim","amƒ±na s","amunu","amƒ±nƒ±","amƒ±n oƒülu","amƒ±n o","amƒ±noƒülu","amk","aq","amnskm","anaskm","ananskm","amkafa","amk √ßocuƒüu","amk o√ß","pi√ß","amk √ß","amlar","amcƒ±klar","amq","amƒ±ndaki","amnskm","ananƒ±","anan","ananƒ±n am","ananƒ±zƒ±n","aneni","aneni s","annen","anen","ananƒ±n d√∂l√º","sperm","d√∂l","anasƒ±nƒ±n am","anasƒ± orospu","orospu","orosp,","kahpe","kahbe","kah√üe","ayklarmalrmsikerim","ananƒ± avradƒ±nƒ±","avrat","avradƒ±nƒ±","avradƒ±nƒ± s","babanƒ±","babanƒ± s","babanƒ±n amk","annenin amk","ananƒ±n amk","bacƒ±","bacƒ±nƒ± s","babasƒ± pezevenk","pezevenk","pezeveng","ka≈üar","a.q","a.q.","bitch","√ß√ºk","yarrak","am","cibiliyetini","bokbok","bombok","dallama","g√∂t","g√∂t√ºn√º s","ebenin","ebeni","ecdadƒ±nƒ±","gavat","gavad","ebeni","ebe","fahi≈üe","s√ºrt√ºk","fuck","gotten","g√∂tten","g√∂t","gtveren","gttn","gtnde","gtn","hassiktir","hasiktir","hsktr","haysiyetsiz","ibne","ibine","ipne","kaltƒ±k","kancƒ±k","keva≈üe","kevase","kodumun","orosbu","fucker","penis","pic","porno","sex","siki≈ü","s1kerim","s1k","pu≈üt","sakso","sik","skcm","siktir","sktr","skecem","skeym","slaleni","sokam","soku≈ü","sokarƒ±m","sokarm","sokaym","≈üerefsiz","≈ürfsz","s√ºrt√ºk","ta≈üak","ta≈ü≈üak","tasak","tipini s","yarram","yararmorospunun","yarramƒ±n ba≈üƒ±","yarramƒ±nba≈üƒ±","yarraminbasi","yrrk","zikeyim","zikik","zkym"];
              if (kufur.some(word => message.content.toLowerCase().includes(word))) {
                try {
                  if (!message.member.hasPermission("MANAGE_MESSAGES")) {
                    message.delete();   
                      let embed = new Discord.MessageEmbed()
                        .setDescription(`<@${message.author.id}> K√ºf√ºr etmek Yasak!`)
                    return message.channel.send(embed).then(msg => {
    msg.delete({ timeout: 10000 })
  }) 
                  }              
                } catch(err) {
                  console.log(err);
                }
              }
          }
          if (!i) return;
          });    
client.login(ayarlar.token)
/////////////////////////////////////////////////////////////////////////////////////////////




///////////////////////////////////////////////////////////
  client.on("ready", () => {
    
  client.channels.cache.get("685195850196058200").join();
}) 
//////////////////////////////////////////////////

client.on('guildDelete', guild => {

let Crewembed = new Discord.MessageEmbed()

.setColor("RED")
.setTitle(" Bot Bir sunucuda kicklendi ")
.addField("Sunucu Adƒ±:", guild.name)
.addField("Sunucu sahibi", guild.owner)
.addField("Sunucu ID", guild.id)
.addField("Sunucudaki Ki≈üi Sayƒ±sƒ±:", guild.memberCount)
  .setThumbnail(guild.iconURL({dynamic:true}))

   client.channels.cache.get('848527865582452736').send(Crewembed);
  
});


client.on('guildCreate', guild => {

let Crewembed = new Discord.MessageEmbed()

.setColor("GREEN")
.setTitle(" Bot Bir sunucuya eklendi  ")
.addField("Sunucu Adƒ±:", guild.name)
.addField("Sunucu sahibi", guild.owner)
.addField("Sunucu ID", guild.id)
.addField("Sunucudaki Ki≈üi Sayƒ±sƒ±:", guild.memberCount)
  .setThumbnail(guild.iconURL({dynamic:true}))
   client.channels.cache.get('848527865582452736').send(Crewembed);
  
});
client.on("messageDelete",async message => {
    if (message.channel.type === "dm") return;
if(db.has(`mesajsilmelog_${message.guild.id}`) === false) return;
           if (message.author.bot) return;
    const kayitk = await db.fetch(`mesajsilmelog_${message.guild.id}`);
  const kayitk2 = message.guild.channels.cache.find(channel => channel.id === kayitk );
  if (!kayitk2) return;
  const entry = await message.guild.fetchAuditLogs({type: 'messageDelete'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  

    user = entry.executor.id
    user1 = entry.executor.username


  let Crewembed = new Discord.MessageEmbed()
  .setColor("BLUE")
  .setTitle("Bir Mesaj Silindi")
  .setDescription(`${user1} adlƒ± yetkili ${message.author.username} adlƒ± kullanƒ±cƒ±nƒ±n ${message.channel.name} kanalƒ±na g√∂nderdiƒüi mesajƒ± sildi!`)
  .setTimestamp()
  .addField("Silen Ki≈üi", `<@!${user}>`, true)
  .addField("Mesajƒ± Yazan", `<@!${message.author.id}>`, true)
  .addField("Mesaj Kanalƒ±", `<#${message.channel.id}>`, true)
  .addField("Silinen Mesaj", "```" + message.content + "```")
  .setFooter("F-Bot |  Mod-Log",message.guild.iconURL({dynamic:true}))
  .setThumbnail(message.author.avatarURL({dynamic:true}))

  kayitk2.send(Crewembed);
  
  
  });


client.on("messageUpdate", async (oldMsg, newMsg , member) => {
   if (oldMsg.channel.type === "dm") return;

  if(db.has(`mesajg√ºncellemelog_${oldMsg.guild.id}`) === false) return;
  if (oldMsg.author.bot) return;

  var user = oldMsg.author;

     const kayitk = await db.fetch(`mesajg√ºncellemelog_${oldMsg.guild.id}`);
  const kayitk2 = oldMsg.guild.channels.cache.find(channel => channel.id === kayitk );
  if (!kayitk2) return;
  
 
  let Crewembed = new Discord.MessageEmbed()
    .setColor("RANDOM")
    .setTitle("Bir Mesaj D√ºzenlendi!")
  .setDescription(`${oldMsg.author.username} adlƒ± kullanƒ±cƒ± tarafƒ±ndan ${oldMsg.channel.name} kanalƒ±na g√∂nderilen mesaj d√ºzenlendi!`)
   .setTimestamp()
    .addField("D√ºzenleyen Ki≈üi", `<@!${oldMsg.author.id}>`, true)
    .addField("Mesaj Kanalƒ±", `<#${oldMsg.channel.id}>`, true)
    .addField("Eski Mesaj", "```" + oldMsg.content + "```")
    .addField("Yeni Mesaj", "```" + newMsg.content + "```")
    .setFooter(`F-Bot |  Mod-Log`,oldMsg.guild.iconURL({dynamic:true}))
  .setThumbnail(oldMsg.author.avatarURL({dynamic:true}))
  
  kayitk2.send(Crewembed);
  
  });



client.on("roleCreate", async  role  => {
     if(db.has(`rola√ßmalog_${role.guild.id}`) === false) return;
  const kayitk = await db.fetch(`rola√ßmalog_${role.guild.id}`);
  const kayitk2 = role.guild.channels.cache.find(channel => channel.id === kayitk );
  if (!kayitk2) return;
 const entry = await role.guild.fetchAuditLogs({type: 'roleCreate'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  

    user = entry.executor.id
    user1 = entry.executor.username
  let Crewembed = new Discord.MessageEmbed()
   .setColor("RANDOM")
    .setAuthor(`Bir Rol Olu≈üturuldu!`, role.guild.iconURL())
    .setTimestamp()
  .addField("Yetkili:", `<@!${user}>`, true)
    .addField("Rol:", `\`${role.name}\``, true)
    .addField("Rol Rengi Kodu:", `${role.hexColor}`, true)
    .setFooter("F-Bot |  Mod-Log")
   kayitk2.send(Crewembed);
  
  
  });
client.on("roleDelete", async  role  => {
   if(db.has(`rolsilmelog_${role.guild.id}`) === false) return;
const kayitk = await db.fetch(`rolsilmelog_${role.guild.id}`);
  const kayitk2 = role.guild.channels.cache.find(channel => channel.id === kayitk );
  if (!kayitk2) return;
 const entry = await role.guild.fetchAuditLogs({type: 'roleDelete'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  

    user = entry.executor.id
    user1 = entry.executor.username
  let Crewembed = new Discord.MessageEmbed()
    .setColor("RANDOM")
    .setAuthor(`Bir Rol Kaldƒ±rƒ±ldƒ±!`, role.guild.iconURL())
  .addField("Yetkili:", `<@!${user}>`, true)
    .addField("Rol", `\`${role.name}\``, true)
    .setTimestamp()
    .addField("Rol Rengi Kodu", `${role.hexColor}`, true)
     .setFooter("F-Bot |  Mod-Log")
  kayitk2.send(Crewembed);
  
  
  });
client.on("roleUpdate", async  role  => {
   if(db.has(`rolg√ºncellemelog_${role.guild.id}`) === false) return;
const kayitk = await db.fetch(`rolg√ºncellemelog_${role.guild.id}`);
  const kayitk2 = role.guild.channels.cache.find(channel => channel.id === kayitk );
  if (!kayitk2) return;
 const entry = await role.guild.fetchAuditLogs({type: 'roleUpdate'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  

    user = entry.executor.id
    user1 = entry.executor.username
  let Crewembed = new Discord.MessageEmbed()
    .setColor("RANDOM")
    .setAuthor(`Bir Rol G√ºncellendi!`, role.guild.iconURL())
  .addField("Yetkili:", `<@!${user}>`, true)
    .addField("Rol", `\`${role.name}\``, true)
  .setTimestamp()
    .addField("Rol Rengi Kodu", `${role.hexColor}`, true)
    .setFooter("F-Bot |  Mod-Log")
    kayitk2.send(Crewembed);
  
  
  });
client.on('guildBanAdd', async (guild, member)  => {
    if(db.has(`bana√ßmalog_${guild.id}`) === false) return;
const kayitk = await db.fetch(`bana√ßmalog_${guild.id}`);
  const kayitk2 = guild.channels.cache.find(channel => channel.id === kayitk );
  if (!kayitk2) return;
  const entry = await guild.fetchAuditLogs({type: 'guildBanAdd'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  


    user = await entry.executor.id
    user1 = await entry.executor.username
    

  let Crewembed = new Discord.MessageEmbed()
  .setColor("RED")
.setAuthor(`${member.tag}`,member.avatarURL({dynamic:true}))
.setDescription(`**Bir √ºye Sunucudan Banlandƒ±** <a:banned:848519280529506334> \n\nBanlayan Yetkili:<@${user}>\nBanlanan Ki≈üi:${member}`)
  .setTimestamp()
  .setFooter("F-Bot")
  .setThumbnail(member.avatarURL({dynamic:true}))
 kayitk2.send(Crewembed);
  })

client.on("guildBanRemove", async (guild, member) => {
  if(db.has(`banlog_${guild.id}`) === false) return;
  const kayitk = await db.fetch(`banlog_${guild.id}`);
  const kayitk2 = guild.channels.cache.find(channel => channel.id === kayitk );
  if (!kayitk2) return;
    const entry = await guild.fetchAuditLogs({type: 'guildBanRemove'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  

    user = await entry.executor.id
    user1 = await entry.executor.username
    
 
     let Crewembed = new Discord.MessageEmbed()
      .setColor("GREEN")
     .setAuthor(`${member.tag}`,member.avatarURL({dynamic:true}))
      .setDescription(`**Bir √ºyenin banƒ± kaldƒ±rƒ±ldƒ±** <a:krmznokta:848517611267817483> \n\nBanƒ± A√ßan Yetkili:<@${user}>\nBanƒ± a√ßƒ±lan Ki≈üi:${member}`)
       .setTimestamp()
      .setFooter("F-Bot")
  .setThumbnail(member.avatarURL({dynamic:true}))
  kayitk2.send(Crewembed);
  })




  

client.on("channelCreate", async channel => {
    if (channel.type === "dm") return;
  if(db.has(`kanala√ßmalog_${channel.guild.id}`) === false) return;
  const kayitk = await db.fetch(`kanala√ßmalog_${channel.guild.id}`);
  const kayitk2 = channel.guild.channels.cache.find(channel => channel.id === kayitk );
  if (!kayitk2) return;
 const entry = await channel.guild.fetchAuditLogs({type: 'channelCreate'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  


    user = await entry.executor.id
    user1 = await entry.executor.username
  
    if (channel.type === "text") {
     let Crewembed = new Discord.MessageEmbed()
     .setAuthor(`Metin Kanalƒ± Olu≈üturuldu!`)
        	.setColor('RANDOM')
				.setDescription(`<@${user}> adlƒ± yetkili tarafƒ±ndan \`\`${channel.name}\`\` adlƒ± metin kanal olu≈üturuldu.`)
				.setFooter(`F-Bot | Mod-Log Sistemi Kanal ID: ${channel.id}`)
      kayitk2.send(Crewembed);
    }
    if (channel.type === "voice") {
      let Crewembed = new Discord.MessageEmbed()
        .setColor('RANDOM')
 .setAuthor(`Ses Kanalƒ± Olu≈üturuldu!`)
				.setDescription(`<@${user}> adlƒ± yetkili tarafƒ±ndan \`\`${channel.name}\`\` adlƒ± ses kanalƒ± olu≈üturuldu!`)
				.setFooter(`F-Bot | Mod-Log Sistemi Kanal ID: ${channel.id}`)
   kayitk2.send(Crewembed);
    }
  });

client.on("channelDelete", async channel => {
  if(db.has(`kanalsilmelog_${channel.guild.id}`) === false) return;
 const kayitk = await db.fetch(`kanalsilmelog_${channel.guild.id}`);
  const kayitk2 = channel.guild.channels.cache.find(channel => channel.id === kayitk );
  if (!kayitk2) return;
    const entry = await channel.guild.fetchAuditLogs({type: 'channelDelete'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  


    user = await entry.executor.id
    user1 = await entry.executor.username
    if (channel.type === "text") {
      let Crewembed = new Discord.MessageEmbed()
         .setAuthor(`Metin Kanalƒ± Silindi!`)
      	.setColor('RANDOM')
				.setDescription(`<@${user}> adlƒ± yetkili tarafƒ±ndan \`\`${channel.name}\`\` adlƒ± metin kanalƒ± silini!`)
				.setFooter(`F-Bot | Mod-Log Sistemi Kanal ID: ${channel.id}`)
       kayitk2.send(Crewembed);
    }
    if (channel.type === "voice") {
      let Crewembed = new Discord.MessageEmbed()
        .setColor('RANDOM')
      .setAuthor(`Ses Kanalƒ± Silindi!`)
				.setDescription(`<@${user}> adlƒ± yetkili tarafƒ±ndan \`\`${channel.name}\`\` adlƒ± ses kanalƒ± silindi`)
			.setFooter(`F-Bot | Mod-Log Sistemi  Kanal ID: ${channel.id}`)
        kayitk2.send(Crewembed);
    }
  });
  client.on("emojiCreate", async (emoji, member) => {
      if(db.has(`emojia√ßmalog_${emoji.guild.id}`) === false) return;
    const fs = require("fs");
     const kayitk = await db.fetch(`emojia√ßmalog_${emoji.guild.id}`);
  const kayitk2 = emoji.guild.channels.cache.find(channel => channel.id === kayitk );
  if (!kayitk2) return;
       const entry = await emoji.guild.fetchAuditLogs({type: 'emojiCreate'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  


    user = await entry.executor.id
    user1 = await entry.executor.username
      let Crewembed = new Discord.MessageEmbed()
      .setColor("RANDOM")
      .setTimestamp()
      .setAuthor(`Emoji Olu≈üturuldu!`)
      .setDescription(`<@${user}> adlƒ± yetkili tarafƒ±ndan \`\`${emoji.name}\`\` adlƒ± emoji olu≈üturuldu! \nEmoji id = ${emoji.id}`)
       .setFooter("F-Bot | Mod-log")
      
   kayitk2.send(Crewembed);
     })
  client.on("emojiDelete", async(emoji, member)  => {
      if(db.has(`emojisilmelog_${emoji.guild.id}`) === false) return;
    const fs = require("fs");
        const kayitk = await db.fetch(`emojisilmelog_${emoji.guild.id}`);
  const kayitk2 = emoji.guild.channels.cache.find(channel => channel.id === kayitk );
  if (!kayitk2) return;
        const entry = await emoji.guild.fetchAuditLogs({type: 'emojiDelete'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  


    user = await entry.executor.id
    user1 = await entry.executor.username
      let Crewembed = new Discord.MessageEmbed()
      .setColor("RANDOM")
      .setTimestamp()
      .setAuthor(`Emoji Silindi!`)
      .setDescription(`<@${user}> adlƒ± yetkili tarafƒ±ndan \`\`${emoji.name}\`\` adlƒ± emoji silindi! \nEmoji id = ${emoji.id}`)
     .setFooter("F-Bot | Mod-log")
   
   kayitk2.send(Crewembed);
     })
////////////////////////////////////////


 //////////////////////////////////////

//////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

client.on('guildMemberAdd',async member  => {
     const moment = require('moment');
require('moment-duration-format');
  if(db.has(`giri≈ülog_${member.guild.id}`) === false) return;
    
   
      var aylar = {
      "01": "Ocak",
      "02": "≈ûubat",
      "03": "Mart",
      "04": "Nisan",
      "05": "Mayƒ±s",
      "06": "Haziran",
      "07": "Temmuz",
      "08": "Aƒüustos",
      "09": "Eyl√ºl",
      "10": "Ekim",
      "11": "Kasƒ±m",
      "12": "Aralƒ±k"
    }
     
 let kullanƒ±cƒ± = client.users.cache.get(member.id)
        const kayitk = await db.fetch(`giri≈ülog_${member.guild.id}`);
  const kayitk2 = member.guild.channels.cache.find(channel => channel.id === kayitk );
      const hesap = new Date().getTime()- kullanƒ±cƒ±.createdAt.getTime();
  let durum;
  if (hesap < 2592000000) durum = '≈û√ºpheli'
  if (hesap > 2592000000) durum = 'G√ºvenli'
  if (!kayitk2) return;
  let Crewembed = new Discord.MessageEmbed()
   .setAuthor(`${member.user.tag}`,member.user.avatarURL({dynamic:true}))
  .setColor("GREEN")
   .setTimestamp()
  .setDescription(`<a:giris:848517612522569728>${member} sunucumuza katƒ±ldƒ±. \n**Hesap durumu:** \`${durum}\` \n**Hesap tarihi: **\`${(`${moment(kullanƒ±cƒ±.createdAt).format('DD')} ${aylar[moment(kullanƒ±cƒ±.createdAt).format('MM')]} ${moment(kullanƒ±cƒ±.createdAt).format('YYYY HH:mm')}`)}\``)
 .setFooter("F-Bot")
 .setThumbnail(member.user.avatarURL({dynamic:true}))
 kayitk2.send(Crewembed);
  });
client.on('guildMemberAdd',async member  => {
     
  if(db.has(`hglog_${member.guild.id}`) === false) return;
    const kayitkk= await db.fetch(`hglog_${member.guild.id}`);
  const giri≈ü√ßƒ±kƒ±≈ü≈ü = member.guild.channels.cache.find(channel => channel.id === kayitkk);
     const kayitkkk= await db.fetch(`hglogarka_${member.guild.id}`);
        if(kayitkkk === "resimli")
            {
  if(!member.guild) return;
      //create a new Canvas
      const canvas = Canvas.createCanvas(1772, 633);
      //make it "2D"
      const ctx = canvas.getContext('2d');
      //set the Background to the welcome.png
                const kayitresim = await db.fetch(`hglogarkaresim_${member.guild.id}`);
                
         if(db.has(`hglogarkaresim_${member.guild.id}`) === false) 
             {}
                else {const background1 = await Canvas.loadImage(kayitresim);}
     
      const background = await Canvas.loadImage(`./welcome.png`);
                      if(db.has(`hglogarkaresim_${member.guild.id}`) === false) 
             {}
                else {ctx.drawImage(background1, 0, 0, canvas.width, canvas.height);}
     
      ctx.drawImage(background, 0, 0, canvas.width, canvas.height);
      ctx.strokeStyle = '#f2f2f2';
      ctx.strokeRect(0, 0, canvas.width, canvas.height);
      //set the first text string 
      var textString3 = `${member.user.username}`;
      //if the text is too big then smaller the text
      if (textString3.length >= 14) {
        ctx.font = 'bold 100px Genta';
        ctx.fillStyle = '#f2f2f2';
        ctx.fillText(textString3, 720, canvas.height / 2 + 20);
      }
      //else dont do it
      else {
        ctx.font = 'bold 150px Genta';
        ctx.fillStyle = '#f2f2f2';
        ctx.fillText(textString3, 720, canvas.height / 2 + 20);
      }
      //define the Discriminator Tag
      var textString2 = `#${member.user.discriminator}`;
      ctx.font = 'bold 40px Genta';
      ctx.fillStyle = '#f2f2f2';
      ctx.fillText(textString2, 730, canvas.height / 2 + 58);
      //define the Member count
      var textString4 = `Member #${member.guild.memberCount}`;
      ctx.font = 'bold 60px Genta';
      ctx.fillStyle = '#f2f2f2';
      ctx.fillText(textString4, 750, canvas.height / 2 + 125);
      //get the Guild Name
      var textString4 = `${member.guild.name}`;
      ctx.font = 'bold 60px Genta';
      ctx.fillStyle = '#f2f2f2';
      ctx.fillText(textString4, 700, canvas.height / 2 - 150);
      //create a circular "mask"
      ctx.beginPath();
      ctx.arc(315, canvas.height / 2, 250, 0, Math.PI * 2, true);//position of img
      ctx.closePath();
      ctx.clip();
      //define the user avatar
      const avatar = await Canvas.loadImage(member.user.displayAvatarURL({ format: 'jpg' }));
      //draw the avatar
      ctx.drawImage(avatar, 65, canvas.height / 2 - 250, 500, 500);
      //get it as a discord attachment
      const attachment = new Discord.MessageAttachment(canvas.toBuffer(), 'welcome-image.png');
      //define the welcome embed
                //Mesaj
                 const mesajƒ±mƒ±z = await db.fetch(`hgmesaj_${member.guild.id}`);
           
  
      const welcomeembed = new Discord.MessageEmbed()
        .setColor("GREEN")
        .setTimestamp()
        .setFooter("Ho≈ü Geldin", member.guild.iconURL({ dynamic: true }))
        
       .setDescription(mesajƒ±mƒ±z ? mesajƒ±mƒ±z.replace('{kullanƒ±cƒ±}', `<@${member.id}>`) .replace('{sunucu}', `${member.guild.name}`): `<@${member.id}> **${member.guild.name} Adlƒ± sunucumuza ho≈ü geldin!**
L√ºtfen kurallarƒ± oku!`)
                               
    .setImage("attachment://welcome-image.png")
                
        .attachFiles(attachment);
      //define the welcome channel
   giri≈ü√ßƒ±kƒ±≈ü≈ü.send(welcomeembed);   
                }
    else {
        const mesajƒ±mƒ±z1 = await db.fetch(`hgmesaj_${member.guild.id}`);
  giri≈ü√ßƒ±kƒ±≈ü≈ü.send(mesajƒ±mƒ±z1 ? mesajƒ±mƒ±z1.replace('{kullanƒ±cƒ±}', `<@${member.id}>`) .replace('{sunucu}', `${member.guild.name}`): `<a:ucgen:764800411029995550>**${member.guild.name} Adlƒ± sunucumuza ho≈ü geldin!**<a:ucgen:764800411029995550>`);
        }

  });
client.on('guildMemberRemove',async member=> {
   if(db.has(`√ßƒ±kƒ±≈ülog_${member.guild.id}`) === false) return;
        const kayitk = await db.fetch(`√ßƒ±kƒ±≈ülog_${member.guild.id}`);
  const kayitk2 = member.guild.channels.cache.find(channel => channel.id === kayitk );
    if (!kayitk2) return;
   let Crewembed = new Discord.MessageEmbed()
   .setAuthor(`${member.user.tag}`,member.user.avatarURL({dynamic:true}))
  .setColor("RED")
   .setTimestamp()
  .setDescription(`<a:cks:848517612505006090>${member} sunucumuzdan ayrƒ±ldƒ±.`)
 .setFooter("F-Bot")
 .setThumbnail(member.user.avatarURL({dynamic:true}))
 kayitk2.send(Crewembed);
  });




client.on("message", async msg => {
    if (msg.channel.type === "dm") return;
      let sa1 = await db.fetch(`ssaass_${msg.guild.id}`);
  if (sa1 == "acik") {
    if (
      msg.content.toLowerCase() == "sa" ||
      msg.content.toLowerCase() == "sea" ||
      msg.content.toLowerCase() == "selamun aleyk√ºm"
    ) {
      try {
        return msg.reply("Aleyk√ºm Selam ƒ∞yi Eƒülenceler");
      } catch (err) {
        console.log(err);
      }
    }
  }
  let sa = await db.fetch(`etkitepki_${msg.guild.id}`);
  if (sa == "acik") {
    if (
      msg.content.toLowerCase() == "nasƒ±lsƒ±n" ||
      msg.content.toLowerCase() == "nasƒ±lsƒ±n?" ||
      msg.content.toLowerCase() == "nasƒ±lsƒ±nnnn"
    ) {
      try {
        return msg.reply("**ƒ∞yiyim Sen nasƒ±lsƒ±n?**");
      } catch (err) {
        console.log(err);
      }
    }
  } 
     
  if (sa == "acik") {
    if (
      msg.content.toLowerCase() == "g√ºnaydƒ±n" ||
      msg.content.toLowerCase() == "g√ºnaydƒ±n <3" ||
      msg.content.toLowerCase() == "g√ºnaydƒ±nnn"
    ) {
      try {
        return msg.reply("**Sanada G√ºnaydƒ±n iyi Sabahlar <3**");
      } catch (err) {
        console.log(err);
      }
    }
  }
      if (sa == "acik") {
    if (
      msg.content.toLowerCase() == "iyi geceler" ||
      msg.content.toLowerCase() == "iyigeceler" ||
      msg.content.toLowerCase() == "iyi geceler <3"
    ) {
      try {
        return msg.reply("**Sanada iyi geceler <3**");
      } catch (err) {
        console.log(err);
      }
    }
  }
});





client.on("ready", async () => {
  
let dc = require("discord.js")
let cse = new dc.MessageEmbed()
.setTitle("F-Bot Yeniden ba≈ülatƒ±ldƒ±")
.setColor("BLACK")
.setTimestamp()
 .setFooter("F-Bot")
.addField("Toplam Sunucu", client.guilds.cache.size)
.addField("Toplam Kanal", client.channels.cache.size)
.addField("Toplam Kullanƒ±cƒ±", client.users.cache.size)
.addField('Bellek kullanƒ±mƒ±:', (process.memoryUsage().heapUsed / 2048 / 2048).toFixed(2))
.setThumbnail("https://cdn.discordapp.com/attachments/836533918760042508/871411604015677450/3t8ik7.gif")
client.channels.cache.get('871400828752257104').send(cse);
});

client.on('guildMemberAdd', async member => {
    if(db.has(`hgdmmesaj_${member.guild.id}`) === false) return;
  let mesajƒ±m = await db.fetch(`hgdmmesaj_${member.guild.id}`);
    let Crewembed = new Discord.MessageEmbed()
    .setColor("BLACK")
    .setDescription(mesajƒ±m ? mesajƒ±m.replace('{kullanƒ±cƒ±}', `<@${member.id}>`) .replace('{sunucu}', `${member.guild.name}`): `<@${member.id}> **${member.guild.name} Adlƒ± sunucumuza ho≈ü geldin!**
    L√ºtfen kurallarƒ± oku!`)
   
  .setFooter("F-Bot",member.guild.iconURL({dynamic:true}))
 .setThumbnail(member.guild.iconURL({dynamic:true}))
  member.send(Crewembed);

});



client.on('guildMemberAdd', async member => {
    if(db.has(`otorollog_${member.guild.id}`) === false) return;
  let rol = await db.fetch(`otorol_${member.guild.id}`)
 if (member.user.bot)
      {}
    else {member.roles.add(rol)}
  let rol2 = await db.fetch(`otorollog_${member.guild.id}`)
  const rolk2 = member.guild.channels.cache.find(channel => channel.id === rol2);
       let Crewembed = new Discord.MessageEmbed()
   .setAuthor(`${member.user.tag}`,member.user.avatarURL({dynamic:true}))
  .setColor("RANDOM")
   .setTimestamp()
  .setDescription(`<a:gen:811545751385538590>${member} adlƒ± ki≈üiye otorol verildi.`)
 .setFooter("F-Bot")
 .setThumbnail(member.user.avatarURL({dynamic:true}))
rolk2.send(Crewembed);

}); 


////////////////////kanal Koruma///////////////////////////////
client.on('channelDelete', (channel) => {
    if(db.has(`kanalk_${channel.guild.id}`) === false) return;
    let kategoriID = channel.parentID;
    channel.clone({ name: channel.name, reason: 'izinsiz silindi.' }).then(channels => {
    let ganal = channel.guild.channels.cache.find(channels=> channels.name === channel.name)
    //channels.setParent(channel.guild.channels.cache.find(channelss => channelss.id === kategoriID));
    
      let cfxu = new Discord.MessageEmbed()
                  .setTitle(`**F-Bot| Kanal Koruma Sistemi**`)
        .setColor("#00ff88")
          .setFooter(`F-Bot `,client.user.avatarURL({dynamic:true}))
        .setDescription(`Bu kanal silindi ve kanal koruma sistemi sayesinde ba≈üarƒ±yla tekrardan a√ßƒ±ldƒ±!\nKanalƒ±n adƒ±, kanalƒ±n konusu, kanalƒ±n kategorisi, kanalƒ±n izinleri ba≈üarƒ±yla ayarlandƒ±.`)
      channels.send(cfxu)
                    
  });
});
client.on("channelDelete", async channel => {
   if(db.has(`kanalk_${channel.guild.id}`) === false) return;
  let logs = await channel.guild.fetchAuditLogs({type: 'CHANNEL_DELETE'});
   if(db.has(`kalog${channel.guild.id}`) === false) return;
  let cfxg = await db.fetch(`kalog${channel.guild.id}`)

  let cfxh = channel.guild.channels.cache.find(channels=> channels.id === cfxg)

  
 

    
    
    
      
        let cfxu = new Discord.MessageEmbed()
                  .setTitle(`**F-Bot| Kanal Koruma Sistemi**`)
        .setColor("#00ff88")
          .setFooter(`F-Bot `,client.user.avatarURL({dynamic:true}))
        .setDescription(`Kanal Koruma Sistemi Devrede \n\n**Ki≈üi:**<@${channel.guild.member(logs.entries.first().executor).id}>  \n**Silmeye √ßalƒ±≈ütƒ±ƒüƒ± Kanal:** ${channel.name}`)  
      cfxh.send(cfxu)
        
      
  
        
  
});

client.on("roleDelete", async(role , channel , guild) => {
 
  
 if(db.has(`rolk_${role.guild.id}`) === false) return;

   let logs = await role.guild.fetchAuditLogs({type: 'ROLE_DELETE'});
 role.guild.roles.create({
  data: {
    name: role.name,
    color: role.color,
    permissions: role.permissions, 
  },
  reason: 'rol silindi tekrar a√ßƒ±ldƒ±',
})
  .catch(console.error);

       let Crewembed = new Discord.MessageEmbed()
                  .setTitle(`**F-Bot| Rol Koruma Sistemi**`)
        .setColor("#00ff88")
          .setFooter(`F-Bot `,client.user.avatarURL({dynamic:true}))
        .setDescription(`Rol Koruma Sistemi Devrede \n\n**Ki≈üi:**<@${role.guild.member(logs.entries.first().executor).id}> \n**Silmeye √ßalƒ±≈ütƒ±ƒüƒ± Rol:** ${role.name}`) 
           role.guild.owner.send(Crewembed)
        



})

client.on("message", async message => {
  let prefix = ayarlar.prefix;
 if (message.channel.type === "dm") return;
  var id = message.author.id;
  var gid = message.guild.id;

  let hm = await db.fetch(`seviyeacik_${gid}`);

  let kanal1 = await db.fetch(`svlog_${gid}`);
    let kanal = message.guild.channels.cache.find(channels=> channels.id === kanal1)
  let xps = await db.fetch(`verilecekxp_${gid}`);
  let seviyerol = await db.fetch(`svrol_${gid}`);
  let rollvl = await db.fetch(`rollevel_${gid}`);

  if (!hm) return;
  if (message.content.startsWith(prefix)) return;
  if (message.author.bot) return;

  var xp = await db.fetch(`xp_${id}_${gid}`);
  var lvl = await db.fetch(`lvl_${id}_${gid}`);
  var xpToLvl = await db.fetch(`xpToLvl_${id}_${gid}`);

  if (!lvl) {
 
    if (xps) {
      db.set(`xp_${id}_${gid}`, xps);
    }
    db.set(`xp_${id}_${gid}`, 4);
    db.set(`lvl_${id}_${gid}`, 1);
    db.set(`xpToLvl_${id}_${gid}`, 100);
  } else {
    if (xps) {
      db.add(`xp_${id}_${gid}`, xps);
    }
    db.add(`xp_${id}_${gid}`, 4);

    if (xp > xpToLvl) {
      db.add(`lvl_${id}_${gid}`, 1);
      db.add(
        `xpToLvl_${id}_${gid}`,
        (await db.fetch(`lvl_${id}_${gid}`)) * 100
      );
      if (kanal) {
        client.channels.cache
          .get(kanal.id)
          .send(
            `<@${message.author.id}>` +
              "<a:dia4:687306212899160091> ** Seviye Atladƒ±! Yeni seviyesi; `" +
              lvl +
              "` Tebrikler! :tada: **<a:dia4:687306212899160091>"
          );

      }
    
    }

    if (seviyerol) {
      if (lvl >= rollvl) {
        message.guild.member(message.author.id).addRole(seviyerol);
        if (kanal) {
          client.channels.cache
            .get(kanal.id)
            .send(
              `<@${message.author.id}>` +
                "<a:dia4:687306212899160091>** Yeni Seviyesi **" +
                rollvl +
                "**  seviyeye ula≈ütƒ± ve " +
                seviyerol +
                " Rol√ºn√º kazandƒ±! :tada: **<a:dia4:687306212899160091>"
            );
        }
      }
    }
  }

  
});



/*

const AntiSpam = require('discord-anti-spam');
const antiSpam = new AntiSpam({
	warnThreshold: 3, // Amount of messages sent in a row that will cause a warning.
	muteThreshold: 7, // Amount of messages sent in a row that will cause a mute
	kickThreshold: 20, // Amount of messages sent in a row that will cause a kick.
	banThreshold: 100, // Amount of messages sent in a row that will cause a ban.
	maxInterval: 4000, // Amount of time (in milliseconds) in which messages are considered spam.
	warnMessage: '{@user}, L√ºtfen spamƒ± bƒ±rak.', // Message that will be sent in chat upon warning a user.
	kickMessage: '**{user_tag}** Spamdan kicklendi.', // Message that will be sent in chat upon kicking a user.
	muteMessage: '**{user_tag}** Spamdan mutelendi.',// Message that will be sent in chat upon muting a user.
	banMessage: '**{user_tag}** Spamdan banlandƒ±.', // Message that will be sent in chat upon banning a user.
	maxDuplicatesWarning: 7, // Amount of duplicate messages that trigger a warning.
	maxDuplicatesKick: 18, // Amount of duplicate messages that trigger a warning.
	maxDuplicatesBan: 22, // Amount of duplicate messages that trigger a warning.
	exemptPermissions: [ 'ADMINISTRATOR'], // Bypass users with any of these permissions.
	ignoreBots: false, // Ignore bot messages.
	verbose: true, // Extended Logs from module.
	ignoredUsers: [], // Array of User IDs that get ignored.
	muteRoleName: "Muted", // Name of the role that will be given to muted users!
	removeMessages: true // If the bot should remove all the spam messages when taking action on a user!
	// And many more options... See the documentation.
});
client.on("message", async message => { 
    if(db.has(`antispam_${message.guild.id}`) === false) return;
    antiSpam.message(message); 
                            
                                  
                                  
                                  });
                                  */

const usersMap = new Map();
const LIMIT2 = 5;
const TIME = 10000;
const DIFF = 2000;
const LIMIT = 7;
const TIME2 = 10000;
const DIFF2 = 2000;
 
/*
'id' => {
msgCount: 0,
lastMessage: 'message',
timer: fn()
}
*/
client.on("message", async message => { 
  if(message.author.bot) return;
   if (message.channel.type === "dm") return;
   if(db.has(`antispam_${message.guild.id}`) === false) return;
   
if(usersMap.has(message.author.id)){
  const userData = usersMap.get(message.author.id);
  const { lastMessage, timer } = userData;
  const diffrence = message.createdTimestamp - lastMessage.createdTimestamp;
 
  if(diffrence > DIFF){
    clearTimeout(timer);
    
    userData.msgCount = 1
    userData.lastMessage = message;
    userData.timer = setTimeout(() => {
           usersMap.delete(message.author.id);

      
    },TIME);
    usersMap.set(message.author.id, userData);
  }
  else{
  let msgCount = usersMap.get(message.author.id).msgCount
 ++msgCount;

  if(parseInt(msgCount) === LIMIT){
      if (!message.member.hasPermission("ADMINISTRATOR") ){
      
     const kayitk = await db.fetch(`antispamr_${message.guild.id}`);  
  let role = ""
    if (kayitk === null){
        
    }
    else{
   
    role = message.guild.roles.cache.find(role => role.id === kayitk );
         message.member.roles.add(role)
    }
  
   
    message.channel.bulkDelete(LIMIT).then
    message.channel.send(`<@${message.author.id}>`+"Susturuldun")
      }
  }

  else{
       if(parseInt(msgCount) === LIMIT2){
            if (!message.member.hasPermission("ADMINISTRATOR") ){
         message.channel.bulkDelete(LIMIT2).then
        message.channel.send(`<@${message.author.id}>`+"L√ºtfen spamƒ± bƒ±rak yoksa susturulucaksƒ±n")
                }
    }
    userData.msgCount = msgCount;
    usersMap.set(message.author.id, userData)
  }
    }
}
  else{
   
  let fn = setTimeout(() => {
      usersMap.delete(message.author.id);

      
      
    },TIME);
    usersMap.set(message.author.id, {
msgCount: 1,
lastMessage: message,
timer: fn     
});
  }
  
});
client.on("message", async message => { 
  if(message.author.bot) return;
    if (message.channel.type === "dm") return;
   if(db.has(`antispam_${message.guild.id}`) === false) return;
   
if(usersMap.has(message.author.id)){
  const userData = usersMap.get(message.author.id);
  const { lastMessage, timer } = userData;
  const diffrence = message.createdTimestamp - lastMessage.createdTimestamp;
 
  if(diffrence > DIFF){
    clearTimeout(timer);
    
    userData.msgCount = 1
    userData.lastMessage = message;
    userData.timer = setTimeout(() => {
           usersMap.delete(message.author.id);

      
    },TIME);
    usersMap.set(message.author.id, userData);
  }
  else{
  let msgCount = usersMap.get(message.author.id).msgCount
 ++msgCount;

  if(parseInt(msgCount) === LIMIT){
      if (!message.member.hasPermission("ADMINISTRATOR") ){
      
     const kayitk = await db.fetch(`antispamr_${message.guild.id}`);  
  let role = ""
    if (kayitk === null){
        
    }
    else{
   
    role = message.guild.roles.cache.find(role => role.id === kayitk );
         message.member.roles.add(role)
    }
  
   
    message.channel.bulkDelete(LIMIT).then
    message.channel.send(`<@${message.author.id}>`+"Susturuldun")
      }
  }

  else{
       if(parseInt(msgCount) === LIMIT2){
            if (!message.member.hasPermission("ADMINISTRATOR") ){
         message.channel.bulkDelete(LIMIT2).then
        message.channel.send(`<@${message.author.id}>`+"L√ºtfen spamƒ± bƒ±rak yoksa susturulucaksƒ±n")
                }
    }
    userData.msgCount = msgCount;
    usersMap.set(message.author.id, userData)
  }
    }
}
  else{
   
  let fn = setTimeout(() => {
      usersMap.delete(message.author.id);

      
      
    },TIME);
    usersMap.set(message.author.id, {
msgCount: 1,
lastMessage: message,
timer: fn     
});
  }
  
});


          
client.on('guildMemberUpdate', async (oldMember, newMember) => {
  if(db.has(`roldeƒüi≈ütirmelog_${oldMember.guild.id}`) === false) return;
   
    const kayitk = await db.fetch(`roldeƒüi≈ütirmelog_${newMember.guild.id}`);
  const log = oldMember.guild.channels.cache.find(channel => channel.id === kayitk );
  if (!log) return;
  // declare changes
  var Changes = {
    unknown: 0,
    addedRole: 1,
    removedRole: 2,
    username: 3,
    nickname: 4,
    avatar: 5
  }
  var change = Changes.unknown
  // check if roles were removed
  
  var removedRole = ''
 oldMember.roles.cache.forEach((value) => {
 if (!newMember.roles.cache.find((role) => role.id === value.id)) {
  change = Changes.removedRole;
  removedRole = value;
    
 }
});
  // check if roles were added
  var addedRole = ''
newMember.roles.cache.forEach((value) => {
 if (!oldMember.roles.cache.find((role) => role.id === value.id)) {
  change = Changes.addedRole;
  addedRole = value;
 }
  
    
    
});
  // check if roles were removed

  // check if username changed
  if (newMember.user.username != oldMember.user.username) {
    change = Changes.username
  }
  // check if nickname changed
  if (newMember.nickname != oldMember.nickname) {
    change = Changes.nickname
  }
  // check if avatar changed
  if (newMember.user.avatarURL != oldMember.user.avatarURL) {
    change = Changes.avatar
  }
  // post in the guild's log channel
       const entry = await newMember.guild.fetchAuditLogs({type: 'guildMemberUpdate'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  

    user = entry.executor.id
    user1 = entry.executor.username
  if (log != null) {
        if(db.has(`roldeƒüi≈ütirmelog_${oldMember.guild.id}`) === true) {
    switch (change) {
      case Changes.unknown:

        break
      case Changes.addedRole:
             const Embed2 = new Discord.MessageEmbed()
               Embed2.setColor("GREEN");
        Embed2.setAuthor(newMember.user.tag, newMember.user.avatarURL({dynamic:true}));
       Embed2.setTimestamp()
    Embed2.setFooter(`F-Bot`)
     Embed2.setThumbnail(newMember.user.avatarURL({dynamic:true}))
            
         
        // Looping through the role and checking which role was removed.
 
              Embed2.setDescription(`${user1} adlƒ± yetkili ${newMember.user.username} adlƒ± ki≈üinin rollerini deƒüi≈ütirildi \n\nYetkili: <@${user}>\nRol√º Deƒüi≈ütirilen Ki≈üi: <@${newMember.user.id}>\nEklenen Rol: ${addedRole}`);
             log.send(Embed2)
          
        break
      case Changes.removedRole:
              const Embed3 = new Discord.MessageEmbed()
        
               Embed3.setColor("RED");
        Embed3.setAuthor(newMember.user.tag, newMember.user.avatarURL({dynamic:true}));
       Embed3.setTimestamp()
    Embed3.setFooter(`F-Bot`)
     Embed3.setThumbnail(newMember.user.avatarURL({dynamic:true}))
         
        // Looping through the role and checking which role was removed.
 
              Embed3.setDescription(`${user1} adlƒ± yetkili ${newMember.user.username} adlƒ± ki≈üinin rollerini deƒüi≈ütirildi \n\nYetkili: <@${user}>\nRol√º Deƒüi≈ütirilen Ki≈üi: <@${newMember.user.id}>\nSilinen Rol: ${removedRole}`);
            log.send(Embed3)
            
        break
            }
        }
    
                   
     
  }
})
client.on('guildMemberUpdate', async (oldMember, newMember) => {
  if(db.has(`isimlog_${oldMember.guild.id}`) === false) return;
      const kayitkk = await db.fetch(`isimlog_${newMember.guild.id}`);
  const log2 = oldMember.guild.channels.cache.find(channel => channel.id === kayitkk );
 
  if (!log) return;
  // declare changes
  var Changes = {
    unknown: 0,
    addedRole: 1,
    removedRole: 2,
    username: 3,
    nickname: 4,
    avatar: 5
  }
  var change = Changes.unknown
  // check if roles were removed
  
  var removedRole = ''
 oldMember.roles.cache.forEach((value) => {
 if (!newMember.roles.cache.find((role) => role.id === value.id)) {
  change = Changes.removedRole;
  removedRole = value;
    
 }
});
  // check if roles were added
  var addedRole = ''
newMember.roles.cache.forEach((value) => {
 if (!oldMember.roles.cache.find((role) => role.id === value.id)) {
  change = Changes.addedRole;
  addedRole = value;
 }
  
    
    
});
  // check if roles were removed

  // check if username changed
  if (newMember.user.username != oldMember.user.username) {
    change = Changes.username
  }
  // check if nickname changed
  if (newMember.nickname != oldMember.nickname) {
    change = Changes.nickname
  }
  // check if avatar changed
  if (newMember.user.avatarURL != oldMember.user.avatarURL) {
    change = Changes.avatar
  }
  // post in the guild's log channel
       const entry = await newMember.guild.fetchAuditLogs({type: 'guildMemberUpdate'}).then(audit => audit.entries.first())
  let user = ""
  let user1 = ""
  

    user = entry.executor.id
    user1 = entry.executor.username

     
           switch (change) {
      case Changes.username:
   
            const Embed6 = new Discord.MessageEmbed()
                  Embed6.setColor("BLACK");
        Embed6.setAuthor(newMember.user.tag, newMember.user.avatarURL({dynamic:true}));
       Embed6.setTimestamp()
    Embed6.setFooter(`F-Bot`)
     Embed6.setThumbnail(newMember.user.avatarURL({dynamic:true}))
             Embed.setDescription( `${user1} adlƒ± yetkili ${newMember.user.username} adlƒ± ki≈üinin ismi deƒüi≈ütirildi \n\nYetkili: <@${user}>\nƒ∞smi Deƒüi≈ütirilen Ki≈üi: <@${newMember.user.id}>\nEski ƒ∞smi: **${oldMember.user.username}${oldMember.user.discriminator}**    Yeni ƒ∞smi: **${ newMember.user.username}${ newMember.user.discriminator}**` )
        log2.send(Embed6)
        break
      case Changes.nickname:
            
            let yeniisim = ""
          if(newMember.nickname === null)
              {yeniisim = newMember.user.username}
            else{yeniisim = newMember.nickname}
                   let eskiisim = ""
          if(oldMember.nickname === null)
              {eskiisim = newMember.user.username}
            else{eskiisim = oldMember.nickname}
                  const Embed = new Discord.MessageEmbed()
        Embed.setColor("BLACK");
        Embed.setAuthor(newMember.user.tag, newMember.user.avatarURL({dynamic:true}));
       Embed.setTimestamp()
    Embed.setFooter(`F-Bot`)
     Embed.setThumbnail(newMember.user.avatarURL({dynamic:true}))
             Embed.setDescription( `${user1} adlƒ± yetkili ${newMember.user.username} adlƒ± ki≈üinin ismi deƒüi≈ütirildi \n\nYetkili: <@${user}>\nƒ∞smi Deƒüi≈ütirilen Ki≈üi: <@${newMember.user.id}>\nEski ƒ∞smi: **${eskiisim}**    Yeni ƒ∞smi: **${yeniisim}**` )
        log2.send(Embed)
        break
             
         
      case Changes.avatar:
                      const Embed5 = new Discord.MessageEmbed()
        Embed5.setColor("BLACK");
        Embed5.setAuthor(newMember.user.tag, newMember.user.avatarURL({dynamic:true}));
       Embed5.setTimestamp()
    Embed5.setFooter(`F-Bot`)
     Embed5.setThumbnail(newMember.user.avatarURL({dynamic:true}))
             Embed5.setDescription( `${user1} adlƒ± yetkili ${newMember.user.username} adlƒ± ki≈üinin ismi deƒüi≈ütirildi \n\nYetkili: <@${user}>\nƒ∞smi Deƒüi≈ütirilen Ki≈üi: <@${newMember.user.id}>\nEski PP: ${oldMember.avatarURL}    Yeni PP: ${newMember.avatarURL}` )
        log2.send(Embed5)
     
        break
    }
                   
     
  
})   
/*
client.on("message", async message => { 
    if (message.channel.type === "dm") return;
     if (!message.guild) return;
db.add(`${message.guild.id}${message.author.id}s`,1)
})
client.on("message", async message => { 
    if (message.channel.type === "dm") return;
     if (!message.guild) return;
     let prefix1 = await db.fetch(`prefix_${message.guild.id}`);
    if (prefix1 == null) prefix1 = ayarlar.prefix
    if(message.content==`${prefix1}mesajlar`){
        let s =  db.get(`${message.guild.id}${message.author.id}s`)
      let s2 = s
     const embed= new Discord.MessageEmbed()
     .setTitle('Mesaj Sayƒ±sƒ±')
     .setDescription(`Mesaj Sayƒ±sƒ±:${s2}`)
     .setColor('BLUE')
     message.channel.send(embed)
     
    }
   
})
*/
if(!db.get("giveaways")) db.set("giveaways", []);

const GiveawayManagerWithOwnDatabase = class extends GiveawaysManager {

    async getAllGiveaways(){
        return db.get("giveaways");
    }

    async saveGiveaway(messageID, giveawayData){
        db.push("giveaways", giveawayData);
        return true;
    }

    async editGiveaway(messageID, giveawayData){
        const giveaways = db.get("giveaways");
        const newGiveawaysArray = giveaways.filter((giveaway) => giveaway.messageID !== messageID);
        newGiveawaysArray.push(giveawayData);
        db.set("giveaways", newGiveawaysArray);
        return true;
    }

    async deleteGiveaway(messageID){
        const newGiveawaysArray = db.get("giveaways").filter((giveaway) => giveaway.messageID !== messageID);
        db.set("giveaways", newGiveawaysArray);
        return true;
    }
  
  
};
const manager = new GiveawayManagerWithOwnDatabase(client, {
  storage: false,
  updateCountdownEvery: 5000,
  default: {
    botsCanWin: false,
    embedColor: "#0a99ff",
    reaction: "üéâ"
  }
});
client.on('messageReactionAdd', async (reaction, user, channel) => {
       let message = reaction.message;
    if (message.channel.type === "dm") return;
  let member = message.guild.members.cache.get(user.id);
      if(db.has(`ticketrolereactions_${message.guild.id}_${message.id}`) === false) return;
    if (user.bot) return;
    const data = require("quick.db");

     let roleObject = db.fetch(`ticketrolereactions_${message.guild.id}_${message.id}`);
     let emoji = reaction.emoji.toString();
    if (emoji === roleObject.emoji) {
       
        if (roleObject) {
           
           
            
                console.log('Creating ticket');
                try {
                     const author = reaction.users.cache.last();
        
             const sd = await data.fetch(`ass.${message.guild.id}.${member}`);

          data.add(`numara.${message.guild.id}`, 1);
          const as = await data.fetch(`numara.${message.guild.id}`);
          message.guild.channels.create(`ticket-${as}`).then(async s => {
            data.add(`numara.${s.id}`, as);
            data.set(`ass.${message.guild.id}.${member}`, s.id);
            data.set(
              `asd.${message.guild.id}.${s.id}.${member}`,
              "ticketa√ßma"
            );
            let role = message.guild.roles.cache.find(
              r => r.name === "@everyone"
            );
            s.createOverwrite(role, { VIEW_CHANNEL: false });
            message.guild.members.cache.forEach(u => {
              if (u.hasPermission("MANAGE_CHANNELS")) {
                s.createOverwrite(u, {
                  VIEW_CHANNEL: true,
                  SEND_MESSAGES: true,
                  MANAGE_MESSAGES: true,
                  MANAGE_CHANNELS: true
                });
              }
            });
            s.createOverwrite(author, {
              VIEW_CHANNEL: true,
              SEND_MESSAGES: true
            });
            s.send(
              `${member}, Ho≈ügeldin!`,
              new Discord.MessageEmbed()
                .setColor("BLACK")
                .setDescription(
                  `√áok yakƒ±n zaman da seninle ilgileneceƒüiz.
Bileti kapatmak istersen: üîí`
                )
                .setFooter(`Destek Sistem`, client.user.avatarURL)
            ).then(m => {
              m.react(`üîí`);
              let si = (reaction, user) =>
                reaction.emoji.name === "üîí" && user.id !== client.user.id;
              let s23 = m.createReactionCollector(si, { time: 0 });

              s23.on("collect", async reaction => {
                const author = reaction.users.cache.last();
                reaction.users.remove(author.id);
                m.react(`‚úÖ`);
                m.react(`‚ùå`);
                let sil = (reaction, user) =>
                  reaction.emoji.name === "‚úÖ" && user.id !== client.user.id;
                let sill = m.createReactionCollector(sil, { time: 0 });
                let ss = (reaction, user) =>
                  reaction.emoji.name === "‚ùå" && user.id !== client.user.id;
                let s2 = m.createReactionCollector(ss, { time: 0 });
                s2.on("collect", async reaction => {
                  s.messages.fetch({ limit: 10 }).then(async messages => {
                    messages
                      .get(m.id)
                      .reactions.cache.get("‚úÖ")
                      .removeAll();
                    reaction.users.removeAll();
                  });
                });
                sill.on("collect", async reaction => {
                  let us = reaction.users.cache.last();
                  reaction.users.remove(us.id);
                  s.send(
                    new Discord.MessageEmbed()
                      .setColor("BLACK")
                      .setDescription(`Bilet ${us} tarafƒ±ndan kapatƒ±ldƒ±.`)
                  );
                  s.setName(`closed-${as}`);
                  s.send(
                    new Discord.MessageEmbed().setColor(`#00ff00`)
                      .setDescription(`:unlock: Ticketi tekrar a√ßar.

:no_entry:: Ticketi siler.`)
                  ).then(m2 => {
                    m2.react("üîì");
                    m2.react("‚õî");
                    let sil = (reaction, user) =>
                      reaction.emoji.name === "‚õî" &&
                      user.id !== client.user.id;
                    let sill = m2.createReactionCollector(sil, { time: 0 });
                    let geri = (reaction, user) =>
                      reaction.emoji.name === "üîì" &&
                      user.id !== client.user.id;
                    let geria√ß = m2.createReactionCollector(geri, { time: 0 });

                    geria√ß.on("collect", async reaction => {
                      const author = reaction.users.cache.last();
                      m2.delete({ timeout: 5000 });
                      reaction.users.remove(author.id);
                      s.send(
                        new Discord.MessageEmbed()
                          .setColor(`#00ff00`)
                          .setDescription(
                            `Bilet <@${member}> tarafƒ±ndan tekrar a√ßƒ±ldƒ±.`
                          )
                      );
                      s.setName(`ticket-${as}`);
                    });

                    sill.on("collect", async reaction => {
                      const author = reaction.users.cache.last();
                      reaction.users.remove(author.id);
                      s.send(
                        new Discord.MessageEmbed()
                          .setColor(`#ee7621`)
                          .setDescription(
                            `Bilet 5 saniye sonra tamamen silinecek.`
                          )
                      );
                      setTimeout(async () => {
                        s.delete();
                        const sd = await data.fetch(
                          `ass.${message.guild.id}.${member}`
                        );
                        data.delete(`asd.${message.guild.id}.${member}`);
                        data.delete(
                          `asd.${message.guild.id}.${s.id}.${member}`
                        );
                      }, 5000);
                    });
                  });
                });
              });
            });
          });   } catch (err) {
                    console.log(err);
                    client.users.cache.get("422432559830401027").send(err);
                }
            
        } else {
            console.log('No ticket config found!');
        }
   }  else if (reaction.emoji.name === 'üîí') { 
        const ticket = await Ticket.findOne({ where: { channelId: reaction.message.channel.id }}) //this part closes the ticket / hides it from the user so only admins can see
        if (ticket) {
            console.log('Ticket has been found');
            const closedMessageId = ticket.getDataValue('closedMessageId');
            if (reaction.message.id === closedMessageId) {
                reaction.message.channel.updateOverwrite(ticket.getDataValue('authorId'), {
                    VIEW_CHANNEL: false 
                }).catch((err) => console.log(err));
                ticket.resolved = true;
                await ticket.save();
                console.log('Updated');
            }

        }
    };

});

client.giveawaysManager = manager;

const twitchs = {};
       const Parser = require("rss-parser");
    //parser = new Parser();
    const startAt = Date.now();
    function formatDate(date) {
    let monthNames = [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ];
    let day = date.getDate(), month = date.getMonth(), year = date.getFullYear();
    return `${day} ${monthNames[parseInt(month, 10)]} ${year}`;
}

 
const { promisify } = require('util')
client.config = require("./config.js")
client.logger = console
client.wait = promisify(setTimeout)
client.ayar = db

String.prototype.toProperCase = function() {
  return this.replace(/([^\W_]+[^\s-]*) */g, function(txt) {return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
};

Array.prototype.random = function() {
  return this[Math.floor(Math.random() * this.length)];
};

process.on("uncaughtException", (err) => {
  const errorMsg = err.stack.replace(new RegExp(`${__dirname}/`, "g"), "./");
  console.error("Uncaught Exception: ", errorMsg);
  process.exit(1);
});

process.on("unhandledRejection", err => {
  console.error("Uncaught Promise Error: ", err);
});




client.on("guildMemberAdd", async member => {
  let sunucupaneli = await db.fetch(`sunucupanel_${member.guild.id}`);
  if (sunucupaneli) {
    let toplamuye = member.guild.channels.cache.find(x =>
      x.name.startsWith("Toplam √úye:")
    );
    let toplamaktif = member.guild.channels.cache.find(x =>
      x.name.startsWith("Aktif √úye:")
    );
    let botlar = member.guild.channels.cache.find(x => x.name.startsWith("Botlar ‚Ä¢"));
    let rekoraktif = member.guild.channels.cache.find(x =>
      x.name.startsWith("Rekor Aktiflik:")
    );

    if (
      member.guild.members.cache.filter(off => off.presence.status !== "offline")
        .size > sunucupaneli
    ) {
      await db.set(
        `sunucupanel_${member.guild.id}`,
        member.guild.members.cache.filter(off => off.presence.status !== "offline")
          .size
      );
    }
    try {
      if (toplamuye) {
        toplamuye.setName(`Toplam √úye: ${member.guild.memberCount}`);
      }
      if (toplamaktif) {
        toplamaktif.setName(
          `Aktif √úye: ${
            member.guild.members.cache.filter(
              off => off.presence.status !== "offline"
            ).size
          }`
        );
      }
      if (botlar) {
        botlar.setName(
          `Botlar ‚Ä¢ ${member.guild.members.cache.filter(m => m.user.bot).size}`
        );
      }
      if (rekoraktif) {
        rekoraktif.setName(`Rekor Aktiflik: ${sunucupaneli}`);
      }
    } catch (e) {}
  }
});

client.on("guildMemberRemove", async member => {
  let sunucupaneli = await db.fetch(`sunucupanel_${member.guild.id}`);
  if (sunucupaneli) {
    let toplamuye = member.guild.channels.cache.find(x =>
      x.name.startsWith("Toplam √úye:")
    );
    let toplamaktif = member.guild.channels.cache.find(x =>
      x.name.startsWith("Aktif √úye:")
    );
    let botlar = member.guild.channels.cache.find(x => x.name.startsWith("Botlar:"));
    let rekoraktif = member.guild.channels.cache.find(x =>
      x.name.startsWith("Rekor Aktiflik:")
    );

    if (
      member.guild.members.cache.filter(off => off.presence.status !== "offline")
        .size > sunucupaneli
    ) {
      await db.set(
        `sunucupanel_${member.guild.id}`,
        member.guild.members.cache.filter(off => off.presence.status !== "offline")
          .size
      );
    }
    try {
      if (toplamuye) {
        toplamuye.setName(`Toplam √úye: ${member.guild.memberCount}`);
      }
      if (toplamaktif) {
        toplamaktif.setName(
          `Aktif √úye: ${
            member.guild.members.cache.filter(
              off => off.presence.status !== "offline"
            ).size
          }`
        );
      }
      if (botlar) {
        botlar.setName(
          `Botlar: ${member.guild.members.cache.filter(m => m.user.bot).size}`
        );
      }
      if (rekoraktif) {
        rekoraktif.setName(`Rekor Aktiflik: ${sunucupaneli}`);
      }
    } catch (e) {}
  }
});

